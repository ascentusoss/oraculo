{"version":3,"file":"magic-constants-whitelist.js","sourceRoot":"","sources":["../../../src/shared/helpers/magic-constants-whitelist.ts"],"names":[],"mappings":"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","sourcesContent":["// SPDX-License-Identifier: MIT\n\n/**\n * Whitelist de magic constants conhecidos de frameworks populares.\n *\n * Esses valores são limitações documentadas de APIs externas e não devem\n * ser reportados como magic numbers, pois criar constantes para eles é verboso\n * e todos os desenvolvedores que usam essas APIs conhecem esses limites.\n */\n\nimport type { MagicConstantRule } from '@';\n\nexport type { MagicConstantRule };\n\n/**\n * Discord.js API limits (oficialmente documentados)\n * @see https://discord.com/developers/docs/resources/channel#embed-limits\n * @see https://discord.com/developers/docs/interactions/message-components#select-menus\n */\nexport const DISCORD_LIMITS: MagicConstantRule[] = [\n  { value: 10, description: 'Máximo de fields em embed' },\n  { value: 25, description: 'Máximo de opções em SelectMenu' },\n  { value: 90, description: 'Máximo de caracteres em button label' },\n  { value: 100, description: 'Máximo de caracteres em select option label' },\n  { value: 256, description: 'Máximo de caracteres em embed field name' },\n  { value: 1024, description: 'Máximo de caracteres em embed field value' },\n  { value: 2000, description: 'Máximo de caracteres em mensagem' },\n  { value: 4000, description: 'Máximo de caracteres em embed description' },\n  { value: 6000, description: 'Máximo total de caracteres em embed' },\n];\n\n/**\n * HTTP Status Codes comuns\n */\nexport const HTTP_STATUS_CODES: MagicConstantRule[] = [\n  { value: 200, description: 'HTTP OK' },\n  { value: 201, description: 'HTTP Created' },\n  { value: 204, description: 'HTTP No Content' },\n  { value: 400, description: 'HTTP Bad Request' },\n  { value: 401, description: 'HTTP Unauthorized' },\n  { value: 403, description: 'HTTP Forbidden' },\n  { value: 404, description: 'HTTP Not Found' },\n  { value: 500, description: 'HTTP Internal Server Error' },\n  { value: 502, description: 'HTTP Bad Gateway' },\n  { value: 503, description: 'HTTP Service Unavailable' },\n];\n\n/**\n * Limites comuns de paginação e performance\n */\nexport const COMMON_LIMITS: MagicConstantRule[] = [\n  { value: 20, description: 'Paginação padrão (20 items)' },\n  { value: 50, description: 'Paginação média (50 items)' },\n  { value: 5000, description: 'Limite comum de batch operations' },\n  { value: 10000, description: 'Limite de query results' },\n];\n\n/**\n * Valores matemáticos comuns (já cobertos no detector, mas listados para completude)\n */\nexport const MATH_CONSTANTS: MagicConstantRule[] = [\n  { value: -1, description: 'Index not found' },\n  { value: 0, description: 'Zero/inicial' },\n  { value: 1, description: 'Um/incremento' },\n  { value: 2, description: 'Dois/par' },\n  { value: 10, description: 'Base decimal' },\n  { value: 100, description: 'Porcentagem' },\n  { value: 1000, description: 'Milhar/conversão ms→s' },\n];\n\n/**\n * Mapa de frameworks para suas whitelists\n */\nexport const FRAMEWORK_WHITELISTS: Record<string, MagicConstantRule[]> = {\n  'Discord.js': DISCORD_LIMITS,\n  Express: HTTP_STATUS_CODES,\n  Fastify: HTTP_STATUS_CODES,\n  'Next.js': HTTP_STATUS_CODES,\n  React: [],\n  Vue: [],\n  Angular: [],\n  Stripe: [],\n  'AWS SDK': [],\n};\n\n/**\n * Verifica se um valor numérico está na whitelist para os frameworks detectados\n */\nexport function isWhitelistedConstant(\n  value: number,\n  frameworks: string[],\n  userWhitelist?: number[],\n): boolean {\n  // Verificar whitelist do usuário primeiro\n  if (userWhitelist && userWhitelist.includes(value)) {\n    return true;\n  }\n\n  // Verificar valores matemáticos comuns (sempre válidos)\n  if (MATH_CONSTANTS.some((rule) => rule.value === value)) {\n    return true;\n  }\n\n  // Verificar limites comuns\n  if (COMMON_LIMITS.some((rule) => rule.value === value)) {\n    return true;\n  }\n\n  // Verificar HTTP status codes (sempre válidos em projetos web)\n  if (HTTP_STATUS_CODES.some((rule) => rule.value === value)) {\n    return true;\n  }\n\n  // Verificar whitelists específicas de frameworks\n  for (const framework of frameworks) {\n    const whitelist = FRAMEWORK_WHITELISTS[framework];\n    if (whitelist && whitelist.some((rule) => rule.value === value)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n/**\n * Obtém a descrição de um magic constant, se estiver na whitelist\n */\nexport function getConstantDescription(\n  value: number,\n  frameworks: string[],\n): string | undefined {\n  // Verificar todas as whitelists\n  const allRules = [\n    ...MATH_CONSTANTS,\n    ...COMMON_LIMITS,\n    ...HTTP_STATUS_CODES,\n    ...frameworks.flatMap((f) => FRAMEWORK_WHITELISTS[f] || []),\n  ];\n\n  const rule = allRules.find((r) => r.value === value);\n  return rule?.description;\n}\n"]}