{"version":3,"file":"analista-wrapper.js","sourceRoot":"","sources":["../../../src/shared/helpers/analista-wrapper.ts"],"names":[],"mappings":"AAOA,OAAO,EAAE,4BAA4B,EAAE,MAAM,iBAAiB,CAAC;AAK/D,MAAM,UAAU,kBAAkB,CAAC,QAAkB;IACnD,MAAM,eAAe,GAAG,QAAQ,CAAC,OAAO,CAAC;IAEzC,OAAO;QACL,GAAG,QAAQ;QACX,OAAO,EAAE,CAAC,GAAG,EAAE,OAAO,EAAE,GAAG,EAAE,QAAQ,EAAE,QAAQ,EAAE,EAAE;YAEjD,MAAM,SAAS,GAAG,eAAe,CAAC,GAAG,EAAE,OAAO,EAAE,GAAG,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC;YAGzE,IAAI,SAAS,YAAY,OAAO,EAAE,CAAC;gBACjC,OAAO,SAAS,CAAC,IAAI,CAAC,CAAC,WAAW,EAAE,EAAE;oBACpC,MAAM,GAAG,GAAG,CAAC,WAAW;wBACtB,CAAC,CAAC,EAAE;wBACJ,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,WAAW,CAAC;4BAC1B,CAAC,CAAC,WAAW;4BACb,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC;oBACpB,OAAO,4BAA4B,CACjC,GAAmB,EACnB,QAAQ,CAAC,IAAI,EACb,GAAG,CACJ,CAAC;gBACJ,CAAC,CAAC,CAAC;YACL,CAAC;YAGD,MAAM,GAAG,GAAG,CAAC,SAAS;gBACpB,CAAC,CAAC,EAAE;gBACJ,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC;oBACxB,CAAC,CAAC,SAAS;oBACX,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;YAClB,OAAO,4BAA4B,CACjC,GAAmB,EACnB,QAAQ,CAAC,IAAI,EACb,GAAG,CACJ,CAAC;QACJ,CAAC;KACF,CAAC;AACJ,CAAC;AAKD,MAAM,UAAU,0BAA0B,CAAC,SAAqB;IAC9D,OAAO,SAAS,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;AAC3C,CAAC","sourcesContent":["// SPDX-License-Identifier: MIT\n/**\n * Wrapper para analistas que adiciona suporte automático a supressões inline\n */\n\nimport type { Analista, Ocorrencia } from '@';\n\nimport { filtrarOcorrenciasSuprimidas } from './suppressao.js';\n\n/**\n * Envolve um analista para adicionar suporte a supressões inline\n */\nexport function comSupressaoInline(analista: Analista): Analista {\n  const aplicarOriginal = analista.aplicar;\n\n  return {\n    ...analista,\n    aplicar: (src, relPath, ast, fullPath, contexto) => {\n      // Executa o analista original\n      const resultado = aplicarOriginal(src, relPath, ast, fullPath, contexto);\n\n      // Se o resultado é uma Promise, aguarda antes de filtrar\n      if (resultado instanceof Promise) {\n        return resultado.then((ocorrencias) => {\n          const arr = !ocorrencias\n            ? []\n            : Array.isArray(ocorrencias)\n              ? ocorrencias\n              : [ocorrencias];\n          return filtrarOcorrenciasSuprimidas(\n            arr as Ocorrencia[],\n            analista.nome,\n            src,\n          );\n        });\n      }\n\n      // Filtra ocorrências baseado em supressões inline\n      const arr = !resultado\n        ? []\n        : Array.isArray(resultado)\n          ? resultado\n          : [resultado];\n      return filtrarOcorrenciasSuprimidas(\n        arr as Ocorrencia[],\n        analista.nome,\n        src,\n      );\n    },\n  };\n}\n\n/**\n * Aplica o wrapper de supressão a múltiplos analistas\n */\nexport function aplicarSupressaoAAnalistas(analistas: Analista[]): Analista[] {\n  return analistas.map(comSupressaoInline);\n}\n"]}