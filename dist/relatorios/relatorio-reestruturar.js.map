{"version":3,"file":"relatorio-reestruturar.js","sourceRoot":"","sources":["../../src/relatorios/relatorio-reestruturar.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,iBAAiB,EAAE,MAAM,yBAAyB,CAAC;AAC5D,OAAO,EAAE,YAAY,EAAE,MAAM,qCAAqC,CAAC;AAInE,MAAM,CAAC,KAAK,UAAU,kCAAkC,CACtD,OAAe,EACf,UAAiC,EACjC,MAAoC;IAEpC,MAAM,OAAO,GAAG,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC;IACzC,MAAM,KAAK,GAAG,UAAU,CAAC,MAAM,CAAC;IAChC,MAAM,QAAQ,GAAG,MAAM,EAAE,QAAQ,CAAC;IAClC,MAAM,MAAM,GAAG,MAAM,EAAE,MAAM,IAAI,cAAc,CAAC;IAChD,MAAM,MAAM,GAAG,MAAM,EAAE,MAAM,IAAI,SAAS,CAAC;IAC3C,MAAM,SAAS,GAAG,MAAM,EAAE,SAAS,IAAI,CAAC,CAAC;IAEzC,MAAM,MAAM,GAAa,EAAE,CAAC;IAC5B,MAAM,CAAC,IAAI,CAAC,KAAK,iBAAiB,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC,CAAC;IAC1D,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IAChB,MAAM,CAAC,IAAI,CACT,KAAK,iBAAiB,CAAC,YAAY,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,OAAO,OAAO,IAAI,CAC5E,CAAC;IACF,MAAM,CAAC,IAAI,CACT,KAAK,iBAAiB,CAAC,YAAY,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,OAAO,QAAQ,CAAC,CAAC,CAAC,iBAAiB,CAAC,YAAY,CAAC,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,CAAC,iBAAiB,CAAC,YAAY,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,IAAI,CACpM,CAAC;IACF,MAAM,CAAC,IAAI,CACT,KAAK,iBAAiB,CAAC,YAAY,CAAC,MAAM,CAAC,SAAS,CAAC,WAAW,OAAO,MAAM,IAAI,CAClF,CAAC;IACF,MAAM,CAAC,IAAI,CACT,KAAK,iBAAiB,CAAC,YAAY,CAAC,MAAM,CAAC,SAAS,CAAC,MAAM,OAAO,MAAM,IAAI,CAC7E,CAAC;IACF,MAAM,CAAC,IAAI,CACT,KAAK,iBAAiB,CAAC,YAAY,CAAC,MAAM,CAAC,UAAU,CAAC,KAAK,OAAO,KAAK,IAAI,CAC5E,CAAC;IACF,MAAM,CAAC,IAAI,CACT,KAAK,iBAAiB,CAAC,YAAY,CAAC,MAAM,CAAC,SAAS,CAAC,KAAK,OAAO,SAAS,IAAI,CAC/E,CAAC;IACF,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IAChB,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IACnB,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IAEhB,MAAM,CAAC,IAAI,CAAC,MAAM,iBAAiB,CAAC,YAAY,CAAC,MAAM,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,CAAC;IAC7E,IAAI,CAAC,KAAK,EAAE,CAAC;QACX,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,YAAY,CAAC,MAAM,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;IACtE,CAAC;SAAM,CAAC;QACN,MAAM,IAAI,GAAG,iBAAiB,CAAC,YAAY,CAAC,MAAM,CAAC,UAAU,CAAC,OAAO,CAAC;QACtE,MAAM,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,MAAM,MAAM,IAAI,CAAC,OAAO,IAAI,CAAC,CAAC;QACpD,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QAC7B,KAAK,MAAM,CAAC,IAAI,UAAU,EAAE,CAAC;YAC3B,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC;QACzC,CAAC;IACH,CAAC;IAED,MAAM,YAAY,CAAC,OAAO,EAAE,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;AACjD,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,8BAA8B,CAClD,OAAe,EACf,UAAiC,EACjC,MAAoC;IAEpC,MAAM,IAAI,GAAG;QACX,QAAQ,EAAE,OAAO,CAAC,MAAM,EAAE,QAAQ,CAAC;QACnC,MAAM,EAAE,MAAM,EAAE,MAAM,IAAI,cAAc;QACxC,MAAM,EAAE,MAAM,EAAE,MAAM,IAAI,SAAS;QACnC,SAAS,EAAE,MAAM,EAAE,SAAS,IAAI,CAAC;QACjC,eAAe,EAAE,UAAU,CAAC,MAAM;QAClC,UAAU;QACV,SAAS,EAAE,IAAI,CAAC,GAAG,EAAE;KACtB,CAAC;IACF,MAAM,YAAY,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;AACpC,CAAC","sourcesContent":["// SPDX-License-Identifier: MIT\nimport { RelatorioMessages } from '@core/messages/index.js';\nimport { salvarEstado } from '@shared/persistence/persistencia.js';\n\nimport type { MovimentoEstrutural, OpcoesRelatorioReestruturar } from '@';\n\nexport async function gerarRelatorioReestruturarMarkdown(\n  caminho: string,\n  movimentos: MovimentoEstrutural[],\n  opcoes?: OpcoesRelatorioReestruturar,\n): Promise<void> {\n  const dataISO = new Date().toISOString();\n  const total = movimentos.length;\n  const simulado = opcoes?.simulado;\n  const origem = opcoes?.origem ?? 'desconhecido';\n  const preset = opcoes?.preset ?? 'oraculo';\n  const conflitos = opcoes?.conflitos ?? 0;\n\n  const linhas: string[] = [];\n  linhas.push(`# ${RelatorioMessages.reestruturar.titulo}`);\n  linhas.push('');\n  linhas.push(\n    `**${RelatorioMessages.reestruturar.secoes.metadados.data}:** ${dataISO}  `,\n  );\n  linhas.push(\n    `**${RelatorioMessages.reestruturar.secoes.metadados.execucao}:** ${simulado ? RelatorioMessages.reestruturar.secoes.metadados.simulacao : RelatorioMessages.reestruturar.secoes.metadados.real}  `,\n  );\n  linhas.push(\n    `**${RelatorioMessages.reestruturar.secoes.metadados.origemPlano}:** ${origem}  `,\n  );\n  linhas.push(\n    `**${RelatorioMessages.reestruturar.secoes.metadados.preset}:** ${preset}  `,\n  );\n  linhas.push(\n    `**${RelatorioMessages.reestruturar.secoes.movimentos.total}:** ${total}  `,\n  );\n  linhas.push(\n    `**${RelatorioMessages.reestruturar.secoes.conflitos.total}:** ${conflitos}  `,\n  );\n  linhas.push('');\n  linhas.push('---');\n  linhas.push('');\n\n  linhas.push(`## ${RelatorioMessages.reestruturar.secoes.movimentos.titulo}`);\n  if (!total) {\n    linhas.push(RelatorioMessages.reestruturar.secoes.movimentos.vazio);\n  } else {\n    const cols = RelatorioMessages.reestruturar.secoes.movimentos.colunas;\n    linhas.push(`| ${cols.origem} | ${cols.destino} |`);\n    linhas.push('|----|------|');\n    for (const m of movimentos) {\n      linhas.push(`| ${m.de} | ${m.para} |`);\n    }\n  }\n\n  await salvarEstado(caminho, linhas.join('\\n'));\n}\n\nexport async function gerarRelatorioReestruturarJson(\n  caminho: string,\n  movimentos: MovimentoEstrutural[],\n  opcoes?: OpcoesRelatorioReestruturar,\n): Promise<void> {\n  const json = {\n    simulado: Boolean(opcoes?.simulado),\n    origem: opcoes?.origem ?? 'desconhecido',\n    preset: opcoes?.preset ?? 'oraculo',\n    conflitos: opcoes?.conflitos ?? 0,\n    totalMovimentos: movimentos.length,\n    movimentos,\n    timestamp: Date.now(),\n  };\n  await salvarEstado(caminho, json);\n}\n"]}