{"version":3,"file":"relatorio-zelador-saude.js","sourceRoot":"","sources":["../../src/relatorios/relatorio-zelador-saude.ts"],"names":[],"mappings":"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","sourcesContent":["// SPDX-License-Identifier: MIT\nimport { estatisticasUsoGlobal } from '/js-ts/analista-padroes-uso.js';\nimport chalk from '/config/chalk-safe.js';\nimport { config } from '/config/config.js';\nimport { log, logRelatorio, RelatorioMessages } from '/messages/index.js';\n\nimport type { LogComBloco, Ocorrencia } from '@';\n\n/**\n * Emite um relat√≥rio sobre a sa√∫de do c√≥digo com base nas estat√≠sticas gerais.\n */\n\nexport function exibirRelatorioZeladorSaude(ocorrencias: Ocorrencia[]): void {\n  // Usa o helper centralizado de molduras, com largura fixa para manter bordas alinhadas\n  const constsMap = estatisticasUsoGlobal.consts as\n    | Record<string, number>\n    | undefined;\n  const requiresMap = estatisticasUsoGlobal.requires as\n    | Record<string, number>\n    | undefined;\n  const constExcessivas = Object.entries(constsMap || {}).filter(\n    ([, n]) => n > 3,\n  );\n  const requireRepetidos = Object.entries(requiresMap || {}).filter(\n    ([, n]) => n > 3,\n  );\n\n  // Cabe√ßalho usando mensagens centralizadas\n  log.info(`\\n${RelatorioMessages.saude.titulo}:\\n`);\n\n  // Moldura do cabe√ßalho (somente em runtime humano)\n  if (!process.env.VITEST) {\n    const tituloCab = RelatorioMessages.saude.titulo.replace('üßº ', ''); // Remove emoji para moldura\n    const linhasCab: string[] = [];\n    const logComBloco = log as LogComBloco;\n    const larguraCab = logComBloco.calcularLargura\n      ? logComBloco.calcularLargura(\n          tituloCab,\n          linhasCab,\n          config.COMPACT_MODE ? 84 : 96,\n        )\n      : undefined;\n    logComBloco.imprimirBloco(\n      tituloCab,\n      linhasCab,\n      chalk.cyan.bold,\n      typeof larguraCab === 'number'\n        ? larguraCab\n        : config.COMPACT_MODE\n          ? 84\n          : 96,\n    );\n  }\n\n  if (ocorrencias.length > 0) {\n    // Usa mensagem centralizada para aviso\n    const logAviso = (\n      log as unknown as {\n        aviso?: (m: string) => void;\n        info: (m: string) => void;\n      }\n    ).aviso;\n    if (typeof logAviso === 'function')\n      logAviso('‚ö†Ô∏è Fun√ß√µes longas encontradas:');\n    else logRelatorio.funcoesLongas();\n    // Agrega por arquivo\n    const porArquivo = new Map<string, number>();\n    for (const o of ocorrencias) {\n      const key = o.relPath || o.arquivo || '[desconhecido]';\n      porArquivo.set(key, (porArquivo.get(key) || 0) + 1);\n    }\n\n    const totalOcorrencias = ocorrencias.length;\n    const arquivosAfetados = porArquivo.size;\n    const maiorPorArquivo = Math.max(...Array.from(porArquivo.values()));\n\n    const mostrarTabela =\n      config.RELATORIO_SAUDE_TABELA_ENABLED && !config.VERBOSE;\n\n    type LogComBloco = {\n      imprimirBloco?: (\n        t: string,\n        l: string[],\n        c?: (s: string) => string,\n        w?: number,\n      ) => void;\n    };\n    const temImprimirBloco =\n      typeof (log as unknown as LogComBloco).imprimirBloco === 'function';\n    if (mostrarTabela && temImprimirBloco) {\n      // Tabela compacta com moldura, sem caminhos\n      const header1 = 'arquivos';\n      const header2 = 'quantidade';\n      const linhas: string[] = [];\n      const col1Width = Math.max(\n        header1.length,\n        'com fun√ß√£o longa'.length,\n        'fun√ß√µes longas (total)'.length,\n        'maior por arquivo'.length,\n      );\n      const col2Width = Math.max(\n        header2.length,\n        String(totalOcorrencias).length,\n        String(arquivosAfetados).length,\n        String(maiorPorArquivo).length,\n      );\n      const pinta = (n: number) => chalk.yellow(String(n).padStart(col2Width));\n      linhas.push(\n        `${header1.padEnd(col1Width)}  ${header2.padStart(col2Width)}`,\n        `${'-'.repeat(col1Width)}  ${'-'.repeat(col2Width)}`,\n        `${'com fun√ß√£o longa'.padEnd(col1Width)}  ${pinta(arquivosAfetados)}`,\n        `${'fun√ß√µes longas (total)'.padEnd(col1Width)}  ${pinta(totalOcorrencias)}`,\n        `${'maior por arquivo'.padEnd(col1Width)}  ${pinta(maiorPorArquivo)}`,\n        ''.padEnd(col1Width + col2Width + 2, ' '),\n        `${'RESUMIDO'.padStart(Math.floor(col1Width / 2) + 4).padEnd(col1Width + col2Width + 2)}`,\n      );\n\n      (\n        log as unknown as {\n          imprimirBloco: (\n            t: string,\n            l: string[],\n            c?: (s: string) => string,\n            w?: number,\n          ) => void;\n        }\n      ).imprimirBloco(\n        'fun√ß√µes longas:',\n        linhas,\n        chalk.cyan.bold,\n        (log as unknown as { calcularLargura?: Function }).calcularLargura\n          ? (log as unknown as { calcularLargura: Function }).calcularLargura(\n              'fun√ß√µes longas:',\n              linhas,\n              config.COMPACT_MODE ? 84 : 96,\n            )\n          : 84,\n      );\n      // Dicas usando mensagens centralizadas\n      log.info(RelatorioMessages.saude.instrucoes.diagnosticoDetalhado);\n      log.info(RelatorioMessages.saude.instrucoes.tabelasVerbosas);\n      log.info('');\n    } else if (mostrarTabela) {\n      // Fallback tabular simplificado\n      const header1 = 'arquivos';\n      const header2 = 'quantidade';\n      const col1Width = Math.max(\n        header1.length,\n        'com fun√ß√£o longa'.length,\n        'fun√ß√µes longas (total)'.length,\n        'maior por arquivo'.length,\n      );\n      const col2Width = Math.max(\n        header2.length,\n        String(totalOcorrencias).length,\n        String(arquivosAfetados).length,\n        String(maiorPorArquivo).length,\n      );\n      log.info(`${header1.padEnd(col1Width)}  ${header2.padStart(col2Width)}`);\n      log.info(`${'-'.repeat(col1Width)}  ${'-'.repeat(col2Width)}`);\n      log.info(\n        `${'com fun√ß√£o longa'.padEnd(col1Width)}  ${chalk.yellow(String(arquivosAfetados).padStart(col2Width))}`,\n      );\n      log.info(\n        `${'fun√ß√µes longas (total)'.padEnd(col1Width)}  ${chalk.yellow(String(totalOcorrencias).padStart(col2Width))}`,\n      );\n      log.info(\n        `${'maior por arquivo'.padEnd(col1Width)}  ${chalk.yellow(String(maiorPorArquivo).padStart(col2Width))}`,\n      );\n      log.info('');\n      // Dicas (mant√©m compatibilidade com testes que s√≥ checam mensagens principais)\n      log.info(RelatorioMessages.saude.instrucoes.diagnosticoDetalhado);\n      log.info(RelatorioMessages.saude.instrucoes.tabelasVerbosas);\n      log.info('');\n    } else {\n      // Modo verbose: lista detalhada usando t√≠tulo centralizado\n      const logInfoRaw = (\n        (\n          log as unknown as {\n            infoSemSanitizar?: (m: string) => void;\n            info: (m: string) => void;\n          }\n        ).infoSemSanitizar || log.info\n      ).bind(log);\n      const titulo = chalk.bold(\n        RelatorioMessages.saude.secoes.funcoesLongas.titulo,\n      );\n      log.info(titulo);\n      const colLeft = 50;\n      const linhasDetalhe: string[] = [];\n      const ordenar = Array.from(porArquivo.entries()).sort(\n        (a, b) => b[1] - a[1],\n      );\n      for (const [arquivo, qtd] of ordenar) {\n        // Normaliza caminho e alinha\n        const left =\n          arquivo.length > colLeft\n            ? `‚Ä¶${arquivo.slice(-colLeft + 1)}`\n            : arquivo;\n        const numero = chalk.yellow(String(qtd).padStart(3));\n        linhasDetalhe.push(`${left.padEnd(colLeft)}  ${numero}`);\n      }\n      // Em verbose n√£o usamos moldura de bloco para permitir rolagem limpa\n      for (const l of linhasDetalhe) logInfoRaw(l);\n      log.info('');\n    }\n  } else {\n    log.sucesso(RelatorioMessages.saude.secoes.funcoesLongas.vazio);\n  }\n\n  if (constExcessivas.length > 0) {\n    log.info(RelatorioMessages.saude.secoes.constantesDuplicadas.titulo);\n    for (const [nome, qtd] of constExcessivas) {\n      log.info(`  - ${nome}: ${qtd} vez(es)`);\n    }\n    log.info('');\n  }\n\n  if (requireRepetidos.length > 0) {\n    log.info(RelatorioMessages.saude.secoes.modulosRequire.titulo);\n    for (const [nome, qtd] of requireRepetidos) {\n      log.info(`  - ${nome}: ${qtd} vez(es)`);\n    }\n    log.info('');\n  }\n\n  // Rodap√© usando mensagens centralizadas\n  log.sucesso(RelatorioMessages.saude.secoes.fim.titulo);\n  // Moldura de rodap√© (somente em runtime humano)\n  if (!process.env.VITEST) {\n    const tituloFim = RelatorioMessages.saude.secoes.fim.titulo;\n    const linhasFim: string[] = ['Mandou bem!'];\n    const larguraFim = (log as unknown as { calcularLargura?: Function })\n      .calcularLargura\n      ? (log as unknown as { calcularLargura: Function }).calcularLargura(\n          tituloFim,\n          linhasFim,\n          config.COMPACT_MODE ? 84 : 96,\n        )\n      : undefined;\n    (log as unknown as { imprimirBloco: Function }).imprimirBloco(\n      tituloFim,\n      linhasFim,\n      chalk.green.bold,\n      typeof larguraFim === 'number'\n        ? larguraFim\n        : config.COMPACT_MODE\n          ? 84\n          : 96,\n    );\n  }\n}\n"]}