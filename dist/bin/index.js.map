{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/bin/index.ts"],"names":[],"mappings":"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","sourcesContent":["#!/usr/bin/env node\n// SPDX-License-Identifier: MIT\n// Bootstrap do binário: registra o loader ESM programaticamente e importa ./cli.js\nimport path from 'node:path';\nimport { fileURLToPath, pathToFileURL } from 'node:url';\n\nimport type { ErrorLike } from '@';\nimport { extrairMensagemErro } from '@';\n\n// Resolve o diretório raiz do dist usando import.meta.url para funcionar em instalações globais\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\nconst distRoot = path.resolve(__dirname, '..');\n// Observação: usar o loader original 'node.loader.mjs' (com ponto) para compatibilidade dos testes e runtime\nconst loaderPath = path.resolve(distRoot, 'node.loader.mjs');\nconst loaderUrl = pathToFileURL(loaderPath).toString();\nconst entryPath = path.resolve(distRoot, 'bin', 'cli.js');\nconst entryUrl = pathToFileURL(entryPath).toString();\n\n// Registra o loader sem usar --experimental-loader (evita ExperimentalWarning)\n(async () => {\n  try {\n    const { register } = await import('node:module');\n    register(loaderUrl, pathToFileURL('./'));\n    // Importa o módulo CLI e, quando presente, invoca explicitamente a função mainCli\n    type CliModule = { mainCli?: () => unknown };\n    const cliMod = (await import(entryUrl)) as unknown;\n    const maybeCli = cliMod as CliModule;\n    if (maybeCli && typeof maybeCli.mainCli === 'function') {\n      await maybeCli.mainCli();\n    }\n  } catch (err: unknown) {\n    // Commander lança códigos especiais quando --version ou --help são usados —\n    // tratá-los como sucesso silencioso (exit 0) em vez de logar como erro.\n    const code =\n      err && typeof err === 'object' && 'code' in err\n        ? (err as { code?: unknown }).code\n        : undefined;\n    const message =\n      err && typeof err === 'object' && 'message' in err\n        ? (err as { message?: unknown }).message\n        : typeof err === 'string'\n          ? err\n          : undefined;\n    if (\n      code === 'commander.version' ||\n      code === 'commander.help' ||\n      code === 'commander.helpDisplayed' ||\n      message === 'outputHelp' ||\n      message === '(outputHelp)'\n    ) {\n      process.exit(0);\n    }\n\n    const msg =\n      typeof message === 'string' ? message : extrairMensagemErro(err);\n    console.error('Erro ao inicializar o oraculo:', msg);\n    if (err && typeof err === 'object' && 'stack' in err) {\n      console.error((err as { stack?: string }).stack);\n    }\n    process.exit(1);\n  }\n})().catch((err: ErrorLike) => {\n  const code =\n    err && typeof err === 'object' && 'code' in err\n      ? (err as { code?: unknown }).code\n      : undefined;\n  const message =\n    err && typeof err === 'object' && 'message' in err\n      ? (err as { message?: unknown }).message\n      : typeof err === 'string'\n        ? err\n        : undefined;\n  if (\n    code === 'commander.version' ||\n    code === 'commander.help' ||\n    code === 'commander.helpDisplayed' ||\n    message === 'outputHelp' ||\n    message === '(outputHelp)'\n  ) {\n    process.exit(0);\n  }\n  const msg = typeof message === 'string' ? message : extrairMensagemErro(err);\n  console.error('Erro ao inicializar o oraculo:', msg);\n  if (err && typeof err === 'object' && 'stack' in err) {\n    console.error((err as { stack?: string }).stack);\n  }\n  process.exit(1);\n});\n"]}