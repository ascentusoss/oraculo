{"version":3,"file":"fix-types-exporter.js","sourceRoot":"","sources":["../../../src/cli/handlers/fix-types-exporter.ts"],"names":[],"mappings":"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","sourcesContent":["// SPDX-License-Identifier: MIT\n/**\n * Handler para exporta√ß√£o de relat√≥rios de fix-types\n * Gera relat√≥rios Markdown e JSON padronizados\n */\n\nimport { promises as fs } from 'node:fs';\nimport path from 'node:path';\n\nimport { config } from '/config/config.js';\nimport { CliExportersMessages } from '/messages/cli/cli-exporters-messages.js';\nimport { log } from '/messages/index.js';\n\nimport type {\n  CasoTipoInseguro,\n  FixTypesExportOptions,\n  FixTypesExportResult,\n} from '@';\n\n// Re-export para compatibilidade\nexport type { CasoTipoInseguro, FixTypesExportOptions, FixTypesExportResult };\n\n/**\n * Gera relat√≥rio JSON estruturado\n */\nasync function gerarRelatorioJson(\n  caminho: string,\n  options: FixTypesExportOptions,\n): Promise<void> {\n  const { casos, stats, minConfidence, verbose } = options;\n\n  const total = stats.legitimo + stats.melhoravel + stats.corrigir;\n  const mediaConfianca =\n    total > 0 ? Math.round(stats.totalConfianca / total) : 0;\n\n  const relatorio = {\n    metadata: {\n      timestamp: new Date().toISOString(),\n      comando: 'fix-types',\n      schemaVersion: '1.0.0',\n      configuracao: {\n        confianciaMinima: minConfidence,\n        modoVerbose: verbose,\n      },\n    },\n    resumo: {\n      totalCasos: total,\n      mediaConfianca,\n      distribuicao: {\n        legitimo: {\n          total: stats.legitimo,\n          percentual:\n            total > 0 ? Math.round((stats.legitimo / total) * 100) : 0,\n        },\n        melhoravel: {\n          total: stats.melhoravel,\n          percentual:\n            total > 0 ? Math.round((stats.melhoravel / total) * 100) : 0,\n        },\n        corrigir: {\n          total: stats.corrigir,\n          percentual:\n            total > 0 ? Math.round((stats.corrigir / total) * 100) : 0,\n        },\n      },\n    },\n    casos: casos.map((c) => ({\n      arquivo: c.arquivo,\n      linha: c.linha,\n      tipo: c.tipo,\n      categoria: c.categoria,\n      confianca: c.confianca,\n      motivo: c.motivo,\n      sugestao: c.sugestao,\n      variantes: c.variantes || [],\n      contexto: c.contexto,\n    })),\n    // Agrupamentos √∫teis para an√°lise\n    analise: {\n      porArquivo: agruparPorArquivo(casos),\n      porCategoria: agruparPorCategoria(casos),\n      altaPrioridade: casos\n        .filter((c) => c.categoria === 'corrigir' && c.confianca >= 85)\n        .map((c) => ({\n          arquivo: c.arquivo,\n          linha: c.linha,\n          confianca: c.confianca,\n          sugestao: c.sugestao || c.motivo,\n        })),\n      casosIncertos: casos\n        .filter(\n          (c) => c.confianca < 70 && c.variantes && c.variantes.length > 0,\n        )\n        .map((c) => ({\n          arquivo: c.arquivo,\n          linha: c.linha,\n          confianca: c.confianca,\n          motivo: c.motivo,\n          variantes: c.variantes,\n        })),\n    },\n  };\n\n  await fs.writeFile(caminho, JSON.stringify(relatorio, null, 2));\n}\n\n/**\n * Gera relat√≥rio Markdown leg√≠vel\n */\nasync function gerarRelatorioMarkdown(\n  caminho: string,\n  options: FixTypesExportOptions,\n): Promise<void> {\n  const { casos, stats, minConfidence } = options;\n\n  const total = stats.legitimo + stats.melhoravel + stats.corrigir;\n  const mediaConfianca =\n    total > 0 ? Math.round(stats.totalConfianca / total) : 0;\n\n  const lines: string[] = [];\n\n  // Cabe√ßalho\n  lines.push('# Relat√≥rio de An√°lise de Tipos Inseguros');\n  lines.push('');\n  lines.push(`**Gerado em:** ${new Date().toISOString()}`);\n  lines.push(`**Comando:** \\`oraculo fix-types\\``);\n  lines.push(`**Confian√ßa M√≠nima:** ${minConfidence}%`);\n  lines.push('');\n\n  // Resumo Executivo\n  lines.push('## üìä Resumo Executivo');\n  lines.push('');\n  lines.push(`- **Total de Casos:** ${total}`);\n  lines.push(`- **Confian√ßa M√©dia:** ${mediaConfianca}%`);\n  lines.push('');\n\n  lines.push('### Distribui√ß√£o por Categoria');\n  lines.push('');\n  lines.push('| Categoria | Total | Percentual | Descri√ß√£o |');\n  lines.push('|-----------|-------|------------|-----------|');\n  lines.push(\n    `| [SUCESSO] LEG√çTIMO | ${stats.legitimo} | ${total > 0 ? Math.round((stats.legitimo / total) * 100) : 0}% | Uso correto - nenhuma a√ß√£o necess√°ria |`,\n  );\n  lines.push(\n    `| [AVISO] MELHOR√ÅVEL | ${stats.melhoravel} | ${total > 0 ? Math.round((stats.melhoravel / total) * 100) : 0}% | Pode ser mais espec√≠fico - revis√£o manual recomendada |`,\n  );\n  lines.push(\n    `| [ERRO] CORRIGIR | ${stats.corrigir} | ${total > 0 ? Math.round((stats.corrigir / total) * 100) : 0}% | Deve ser substitu√≠do - corre√ß√£o necess√°ria |`,\n  );\n  lines.push('');\n\n  // Casos de Alta Prioridade\n  const altaPrioridade = casos.filter(\n    (c) => c.categoria === 'corrigir' && c.confianca >= 85,\n  );\n  if (altaPrioridade.length > 0) {\n    lines.push('## [ERRO] Corre√ß√µes de Alta Prioridade (‚â•85% confian√ßa)');\n    lines.push('');\n    altaPrioridade.forEach((caso, idx) => {\n      lines.push(\n        `### ${idx + 1}. ${caso.arquivo}:${caso.linha || '?'} (${caso.confianca}%)`,\n      );\n      lines.push('');\n      lines.push(`**Motivo:** ${caso.motivo}`);\n      if (caso.sugestao) {\n        lines.push(`**Sugest√£o:** ${caso.sugestao}`);\n      }\n      if (caso.contexto) {\n        lines.push('');\n        lines.push('```typescript');\n        lines.push(caso.contexto);\n        lines.push('```');\n      }\n      lines.push('');\n    });\n  }\n\n  // Casos Incertos\n  const casosIncertos = casos.filter(\n    (c) => c.confianca < 70 && c.variantes && c.variantes.length > 0,\n  );\n  if (casosIncertos.length > 0) {\n    lines.push('## [AVISO] Casos com An√°lise Incerta (<70% confian√ßa)');\n    lines.push('');\n    lines.push(\n      '*Estes casos requerem revis√£o manual cuidadosa - m√∫ltiplas possibilidades detectadas*',\n    );\n    lines.push('');\n\n    casosIncertos.forEach((caso, idx) => {\n      lines.push(\n        `### ${idx + 1}. ${caso.arquivo}:${caso.linha || '?'} (${caso.confianca}%)`,\n      );\n      lines.push('');\n      lines.push(`**Motivo:** ${caso.motivo}`);\n      if (caso.sugestao) {\n        lines.push(`**Sugest√£o:** ${caso.sugestao}`);\n      }\n      if (caso.variantes && caso.variantes.length > 0) {\n        lines.push('');\n        lines.push('**Possibilidades Alternativas:**');\n        caso.variantes.forEach((variante, vIdx) => {\n          lines.push(`${vIdx + 1}. ${variante}`);\n        });\n      }\n      if (caso.contexto) {\n        lines.push('');\n        lines.push('```typescript');\n        lines.push(caso.contexto);\n        lines.push('```');\n      }\n      lines.push('');\n    });\n  }\n\n  // Lista Completa por Categoria\n  lines.push('## [INFO] Lista Completa de Casos');\n  lines.push('');\n\n  for (const categoria of ['legitimo', 'melhoravel', 'corrigir'] as const) {\n    const casosPorCategoria = casos.filter((c) => c.categoria === categoria);\n    if (casosPorCategoria.length === 0) continue;\n\n    const prefixo =\n      categoria === 'legitimo'\n        ? '[SUCESSO]'\n        : categoria === 'melhoravel'\n          ? '[AVISO]'\n          : '[ERRO]';\n    const titulo = categoria.toUpperCase();\n\n    lines.push(`### ${prefixo} ${titulo} (${casosPorCategoria.length} casos)`);\n    lines.push('');\n\n    casosPorCategoria.forEach((caso) => {\n      lines.push(\n        `- **${caso.arquivo}:${caso.linha || '?'}** (${caso.confianca}%)`,\n      );\n      lines.push(`  - ${caso.motivo}`);\n      if (caso.sugestao) {\n        lines.push(`  - [INFO] ${caso.sugestao}`);\n      }\n    });\n    lines.push('');\n  }\n\n  await fs.writeFile(caminho, lines.join('\\n'));\n}\n\n/**\n * Agrupa casos por arquivo\n */\nfunction agruparPorArquivo(casos: CasoTipoInseguro[]): Record<string, number> {\n  return casos.reduce(\n    (acc, caso) => {\n      acc[caso.arquivo] = (acc[caso.arquivo] || 0) + 1;\n      return acc;\n    },\n    {} as Record<string, number>,\n  );\n}\n\n/**\n * Agrupa casos por categoria\n */\nfunction agruparPorCategoria(\n  casos: CasoTipoInseguro[],\n): Record<string, Array<{ arquivo: string; linha?: number }>> {\n  return casos.reduce(\n    (acc, caso) => {\n      if (!acc[caso.categoria]) acc[caso.categoria] = [];\n      acc[caso.categoria].push({ arquivo: caso.arquivo, linha: caso.linha });\n      return acc;\n    },\n    {} as Record<string, Array<{ arquivo: string; linha?: number }>>,\n  );\n}\n\n/**\n * Exporta relat√≥rios de fix-types (Markdown e JSON)\n *\n *  options - Op√ß√µes de exporta√ß√£o\n *  Caminhos dos arquivos gerados ou null em caso de erro\n */\nexport async function exportarRelatoriosFixTypes(\n  options: FixTypesExportOptions,\n): Promise<FixTypesExportResult | null> {\n  if (!config.REPORT_EXPORT_ENABLED) {\n    return null;\n  }\n\n  try {\n    const { baseDir } = options;\n\n    // Determinar diret√≥rio de sa√≠da\n    const dir =\n      typeof config.REPORT_OUTPUT_DIR === 'string'\n        ? config.REPORT_OUTPUT_DIR\n        : path.join(baseDir, 'relatorios');\n\n    // Criar diret√≥rio se n√£o existir\n    await fs.mkdir(dir, { recursive: true });\n\n    // Gerar timestamp √∫nico para os arquivos\n    const ts = new Date().toISOString().replace(/[:.]/g, '-');\n    const nomeBase = `oraculo-fix-types-${ts}`;\n\n    // Gerar relat√≥rio Markdown\n    const caminhoMd = path.join(dir, `${nomeBase}.md`);\n    await gerarRelatorioMarkdown(caminhoMd, options);\n\n    // Gerar relat√≥rio JSON\n    const caminhoJson = path.join(dir, `${nomeBase}.json`);\n    await gerarRelatorioJson(caminhoJson, options);\n\n    // Log de sucesso\n    log.sucesso(CliExportersMessages.fixTypes.relatoriosExportadosTitulo);\n    log.info(CliExportersMessages.fixTypes.caminhoMarkdown(caminhoMd));\n    log.info(CliExportersMessages.fixTypes.caminhoJson(caminhoJson));\n\n    return {\n      markdown: caminhoMd,\n      json: caminhoJson,\n      dir,\n    };\n  } catch (error) {\n    log.erro(\n      CliExportersMessages.fixTypes.falhaExportar((error as Error).message),\n    );\n    return null;\n  }\n}\n"]}