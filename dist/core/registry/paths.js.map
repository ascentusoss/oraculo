{"version":3,"file":"paths.js","sourceRoot":"","sources":["../../../src/core/registry/paths.ts"],"names":[],"mappings":"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","sourcesContent":["// SPDX-License-Identifier: MIT\n/**\n * @fileoverview Gerenciamento centralizado de caminhos para arquivos JSON do Oráculo\n *\n * Este módulo define todos os caminhos de arquivos JSON usados pelo sistema,\n * evitando hardcoding espalhado e permitindo evolução consistente.\n *\n * Convenção de nomes:\n * - guardian.baseline.json: Snapshot de integridade do Guardian\n * - estrutura.baseline.json: Baseline da estrutura de diretórios\n * - estrutura.arquetipo.json: Arquétipo personalizado do repositório\n * - oraculo.config.json: Configuração do usuário (raiz do projeto)\n */\n\nimport path from 'node:path';\n\n// Diretório base do projeto (raiz) - usa CWD quando executado pelo CLI\nexport const PROJECT_ROOT = process.cwd();\n\n/**\n * Diretórios principais do Oráculo\n */\nexport const ORACULO_DIRS = {\n  /** Diretório de estado interno (.oraculo/) */\n  STATE: path.join(PROJECT_ROOT, '.oraculo'),\n\n  /** Diretório de histórico de métricas (.oraculo/historico-metricas/) */\n  METRICS_HISTORY: path.join(PROJECT_ROOT, '.oraculo', 'historico-metricas'),\n\n  /** Diretório de relatórios (relatorios/) */\n  REPORTS: path.join(PROJECT_ROOT, 'relatorios'),\n\n  /** Diretório de performance baselines (docs/perf/) */\n  PERF: path.join(PROJECT_ROOT, 'docs', 'perf'),\n} as const;\n\n/**\n * Arquivos JSON do sistema\n *\n * Categoria 1: Configuração (leitura usuário)\n * Categoria 2: Estado interno (leitura/escrita sistema)\n * Categoria 3: Relatórios (escrita sistema)\n */\nexport const ORACULO_FILES = {\n  /* -------------------------- CONFIGURAÇÃO (raiz do projeto) -------------------------- */\n  /** Configuração principal do usuário (oraculo.config.json) */\n  CONFIG: path.join(PROJECT_ROOT, 'oraculo.config.json'),\n\n  /** Configuração segura/alternativa (oraculo.config.safe.json) */\n  CONFIG_SAFE: path.join(PROJECT_ROOT, 'oraculo.config.safe.json'),\n\n  /* -------------------------- ESTADO INTERNO (.oraculo/) -------------------------- */\n  /** Baseline de integridade do Guardian (.oraculo/guardian.baseline.json) */\n  GUARDIAN_BASELINE: path.join(ORACULO_DIRS.STATE, 'guardian.baseline.json'),\n\n  /** Baseline de estrutura de diretórios (.oraculo/estrutura.baseline.json) */\n  ESTRUTURA_BASELINE: path.join(ORACULO_DIRS.STATE, 'estrutura.baseline.json'),\n\n  /** Arquétipo personalizado do repo (.oraculo/estrutura.arquetipo.json) */\n  ESTRUTURA_ARQUETIPO: path.join(\n    ORACULO_DIRS.STATE,\n    'estrutura.arquetipo.json',\n  ),\n\n  /** Mapa de reversão de estrutura (.oraculo/mapa-reversao.json) */\n  MAPA_REVERSAO: path.join(ORACULO_DIRS.STATE, 'mapa-reversao.json'),\n\n  /** Registros da Vigia Oculta (.oraculo/integridade.json) */\n  REGISTRO_VIGIA: path.join(ORACULO_DIRS.STATE, 'integridade.json'),\n\n  /** Histórico de métricas (.oraculo/historico-metricas/metricas-historico.json) */\n  METRICAS_HISTORICO: path.join(\n    ORACULO_DIRS.METRICS_HISTORY,\n    'metricas-historico.json',\n  ),\n\n  /* -------------------------- ARQUIVOS LEGADOS (compatibilidade) -------------------------- */\n  /** @deprecated Use GUARDIAN_BASELINE - baseline.json antigo */\n  GUARDIAN_BASELINE_LEGACY: path.join(ORACULO_DIRS.STATE, 'baseline.json'),\n\n  /** @deprecated Use ESTRUTURA_BASELINE - baseline-estrutura.json antigo */\n  ESTRUTURA_BASELINE_LEGACY: path.join(\n    ORACULO_DIRS.STATE,\n    'baseline-estrutura.json',\n  ),\n\n  /** @deprecated Movido para .oraculo/ - oraculo.repo.arquetipo.json na raiz */\n  ESTRUTURA_ARQUETIPO_LEGACY_ROOT: path.join(\n    PROJECT_ROOT,\n    'oraculo.repo.arquetipo.json',\n  ),\n} as const;\n\n/**\n * Padrões de nomenclatura para relatórios dinâmicos\n */\nexport const REPORT_PATTERNS = {\n  /** Relatório de diagnóstico (oraculo-diagnostico-{timestamp}.md) */\n  DIAGNOSTICO: (timestamp: string) =>\n    path.join(ORACULO_DIRS.REPORTS, `oraculo-diagnostico-${timestamp}.md`),\n\n  /** Relatório JSON resumo (oraculo-relatorio-summary-{timestamp}.json) */\n  SUMMARY_JSON: (timestamp: string) =>\n    path.join(\n      ORACULO_DIRS.REPORTS,\n      `oraculo-relatorio-summary-${timestamp}.json`,\n    ),\n\n  /** Relatório de análise async (async-analysis-report.json) */\n  ASYNC_ANALYSIS: path.join(ORACULO_DIRS.REPORTS, 'async-analysis-report.json'),\n\n  /** Baseline de performance (docs/perf/baseline-{timestamp}.json) */\n  PERF_BASELINE: (timestamp: string) =>\n    path.join(ORACULO_DIRS.PERF, `baseline-${timestamp}.json`),\n\n  /** Diff de performance (docs/perf/ultimo-diff.json) */\n  PERF_DIFF: path.join(ORACULO_DIRS.PERF, 'ultimo-diff.json'),\n} as const;\n\n/**\n * Mapeia nomes legados para novos caminhos (migração automática)\n */\nexport const MIGRATION_MAP = {\n  // Guardian: baseline.json → guardian.baseline.json\n  [ORACULO_FILES.GUARDIAN_BASELINE_LEGACY]: ORACULO_FILES.GUARDIAN_BASELINE,\n\n  // Estrutura: baseline-estrutura.json → estrutura.baseline.json\n  [ORACULO_FILES.ESTRUTURA_BASELINE_LEGACY]: ORACULO_FILES.ESTRUTURA_BASELINE,\n\n  // Arquétipo: oraculo.repo.arquetipo.json (raiz) → .oraculo/estrutura.arquetipo.json\n  [ORACULO_FILES.ESTRUTURA_ARQUETIPO_LEGACY_ROOT]:\n    ORACULO_FILES.ESTRUTURA_ARQUETIPO,\n} as const;\n\n/**\n * Retorna o caminho legado (se existir) ou o novo\n * @param newPath Caminho novo desejado\n * @returns Caminho do arquivo (prioriza legado se existir)\n */\nexport function resolveFilePath(newPath: string): string {\n  // Verifica se há entrada no mapa de migração reverso\n  const legacyPath = Object.entries(MIGRATION_MAP).find(\n    ([_, target]) => target === newPath,\n  )?.[0];\n\n  return legacyPath || newPath;\n}\n\n/**\n * Tipo para caminhos de arquivos do Oráculo\n */\nexport type OraculoFilePath =\n  (typeof ORACULO_FILES)[keyof typeof ORACULO_FILES];\nexport type OraculoDirPath = (typeof ORACULO_DIRS)[keyof typeof ORACULO_DIRS];\n"]}