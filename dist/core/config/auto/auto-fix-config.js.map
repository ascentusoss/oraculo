{"version":3,"file":"auto-fix-config.js","sourceRoot":"","sources":["../../../../src/core/config/auto/auto-fix-config.ts"],"names":[],"mappings":"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","sourcesContent":["// SPDX-License-Identifier: MIT\n\n// SPDX-License-Identifier: MIT\n// Merged auto-fix configuration: keep compatibility with both older\n// AUTO_FIX_CONFIG_DEFAULTS and the newer DEFAULT_AUTO_FIX_CONFIG surface.\n\nimport type { AutoFixConfig } from '@';\n\n// Re-exporta o tipo para compatibilidade\nexport type { AutoFixConfig };\n\nexport const DEFAULT_AUTO_FIX_CONFIG: AutoFixConfig = {\n  mode: 'balanced',\n  minConfidence: 75,\n  allowedCategories: ['security', 'performance', 'style', 'documentation'],\n  excludePatterns: [\n    '**/node_modules/**',\n    '**/dist/**',\n    '**/build/**',\n    '**/coverage/**',\n    '**/*.min.js',\n    '**/src/nucleo/configuracao/**',\n    '**/src/shared/persistence/**',\n    '**/operario-estrutura.ts',\n    '**/corretor-estrutura.ts',\n    '**/mapa-reversao.ts',\n    '**/quick-fix-registry.ts',\n    '**/config.ts',\n    '**/executor.ts',\n  ],\n  excludeFunctionPatterns: [\n    'planejar',\n    'aplicar',\n    'corrigir',\n    'executar',\n    'processar',\n    'salvar.*Estado',\n    'ler.*Estado',\n    'gerarPlano.*',\n    'detectar.*',\n    'analisar.*',\n    'validar.*',\n  ],\n  maxFixesPerFile: 5,\n  createBackup: true,\n  validateAfterFix: true,\n  // backwards compat defaults\n  allowMutateFs: false,\n  backupSuffix: '.local.bak',\n  conservative: true,\n};\n\nexport const CONSERVATIVE_AUTO_FIX_CONFIG: AutoFixConfig = {\n  ...DEFAULT_AUTO_FIX_CONFIG,\n  mode: 'conservative',\n  minConfidence: 90,\n  allowedCategories: ['security', 'performance'],\n  maxFixesPerFile: 2,\n  excludePatterns: [\n    ...((DEFAULT_AUTO_FIX_CONFIG.excludePatterns as string[]) || []),\n    '**/src/analistas/**',\n    '**/src/arquitetos/**',\n    '**/src/zeladores/**',\n    '**/src/guardian/**',\n    '**/src/cli/**',\n  ],\n};\n\nexport const AGGRESSIVE_AUTO_FIX_CONFIG: AutoFixConfig = {\n  ...DEFAULT_AUTO_FIX_CONFIG,\n  mode: 'aggressive',\n  minConfidence: 60,\n  maxFixesPerFile: 10,\n  excludePatterns: [\n    '**/node_modules/**',\n    '**/dist/**',\n    '**/build/**',\n    '**/coverage/**',\n    '**/*.min.js',\n  ],\n};\n\n// Backwards compat constant name used elsewhere in the codebase\nexport const AUTO_FIX_CONFIG_DEFAULTS = DEFAULT_AUTO_FIX_CONFIG;\n\nexport default AUTO_FIX_CONFIG_DEFAULTS;\n\nexport function shouldExcludeFile(\n  filePath: string,\n  config: AutoFixConfig,\n): boolean {\n  if (!config || !config.excludePatterns) return false;\n  return config.excludePatterns.some((pattern) => {\n    const regexPattern = pattern\n      .replace(/\\*\\*/g, '.*')\n      .replace(/\\*/g, '[^/]*')\n      .replace(/\\?/g, '.');\n    return new RegExp(regexPattern).test(filePath);\n  });\n}\n\nexport function shouldExcludeFunction(\n  functionName: string,\n  config: AutoFixConfig,\n): boolean {\n  if (!config || !config.excludeFunctionPatterns) return false;\n  return config.excludeFunctionPatterns.some((pattern) =>\n    new RegExp(pattern, 'i').test(functionName),\n  );\n}\n\nexport function isCategoryAllowed(\n  category: string,\n  config: AutoFixConfig,\n): boolean {\n  if (!config || !config.allowedCategories) return true;\n  // allowedCategories is an array of known category strings - coerce to string[] for safe includes check\n  return (config.allowedCategories as string[]).includes(category);\n}\n\nexport function hasMinimumConfidence(\n  confidence: number,\n  config: AutoFixConfig,\n): boolean {\n  if (typeof config?.minConfidence !== 'number') return true;\n  return confidence >= (config.minConfidence as number);\n}\n\nexport function getAutoFixConfig(mode?: string): AutoFixConfig {\n  switch (mode) {\n    case 'conservative':\n      return CONSERVATIVE_AUTO_FIX_CONFIG;\n    case 'aggressive':\n      return AGGRESSIVE_AUTO_FIX_CONFIG;\n    case 'balanced':\n    default:\n      return DEFAULT_AUTO_FIX_CONFIG;\n  }\n}\n"]}