{"version":3,"file":"plugins.js","sourceRoot":"","sources":["../../../../src/types/core/parsing/plugins.ts"],"names":[],"mappings":"","sourcesContent":["// SPDX-License-Identifier: MIT\n\nimport type { File as BabelFile, Node } from '/types';\n\n/**\n * AST genérico de diferentes parsers (Python, PHP, XML, HTML, CSS, etc)\n */\n\n// Tipos específicos para cada linguagem\nexport type PythonPhpAstNode = {\n  type: string;\n  body?: PythonPhpAstNode | PythonPhpAstNode[];\n  [key: string]:\n    | PythonPhpAstNode\n    | PythonPhpAstNode[]\n    | string\n    | string[]\n    | number\n    | number[]\n    | boolean\n    | null\n    | undefined;\n};\n\nexport type HtmlXmlNode = {\n  tagName?: string;\n  name?: string;\n  type?: string;\n  children?: HtmlXmlNode[];\n  attribs?: Record<string, string>;\n  attributes?: Record<string, string | number | boolean>;\n  data?: string;\n  [key: string]:\n    | HtmlXmlNode\n    | HtmlXmlNode[]\n    | string\n    | number\n    | boolean\n    | Record<string, unknown>\n    | null\n    | undefined;\n};\n\nexport type CssRule = {\n  type?: string;\n  selectors?: string[];\n  declarations?: Array<{ property: string; value: string }>;\n  [key: string]: string | string[] | Array<Record<string, string>> | undefined;\n};\n\nexport type CssAst = {\n  type: 'StyleSheet';\n  stylesheet?: {\n    rules?: CssRule[];\n    parsingErrors?: Array<{ message: string; line?: number }>;\n  };\n};\n\nexport type RawAst =\n  | Node // Babel AST\n  | PythonPhpAstNode // Python/PHP AST-like\n  | HtmlXmlNode // HTML/XML DOM\n  | CssAst // CSS AST\n  | Record<\n      string,\n      | string\n      | string[]\n      | number\n      | boolean\n      | Record<string, unknown>\n      | null\n      | undefined\n    >; // Fallback genérico\n\n// Alias para uso em parser.ts\nexport type ParserRawAst = RawAst;\n\n/**\n * Metadados do parsing\n */\nexport interface ParserMetadata {\n  parseTime?: number;\n  parserVersion?: string;\n  language?: string;\n  encoding?: string;\n  errors?: Array<{ line: number; message: string }>;\n  warnings?: string[];\n  sourceType?: 'module' | 'script' | 'unambiguous';\n}\n\nexport interface ParserPlugin {\n  name: string;\n  version: string;\n  extensions: string[];\n  parse(\n    codigo: string,\n    opts?: ParserOptions,\n  ): Promise<BabelFile | null> | BabelFile | null;\n  validate?(codigo: string): boolean;\n  dependencies?: string[];\n  config?: Record<string, unknown>;\n}\n\nexport interface ParserOptions {\n  plugins?: string[];\n  timeoutMs?: number;\n  pluginConfig?: Record<string, unknown>;\n  extension?: string;\n  sourceType?: 'module' | 'script' | 'unambiguous';\n  allowReturnOutsideFunction?: boolean;\n}\n\nexport interface BabelFileExtra extends BabelFile {\n  oraculoExtra?: {\n    lang: string;\n    rawAst: RawAst;\n    metadata?: ParserMetadata;\n  };\n}\n\nexport interface PluginConfig {\n  enabled: string[];\n  autoload: boolean;\n  registry?: string;\n  pluginConfigs?: Record<string, Record<string, unknown>>;\n}\n\nexport interface LanguageSupport {\n  enabled: boolean;\n  parser?: string;\n  plugin?: string;\n  config?: Record<string, unknown>;\n}\n"]}