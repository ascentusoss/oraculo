{"version":3,"file":"analista-padroes-uso.js","sourceRoot":"","sources":["../../../src/analistas/js-ts/analista-padroes-uso.ts"],"names":[],"mappings":"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","sourcesContent":["// SPDX-License-Identifier: MIT\n// src/analistas/analista-padroes-uso.ts\nimport type { NodePath } from '/traverse';\nimport type { Node } from '/types';\nimport * as t from '/types';\nimport { traverse } from '/config/traverse.js';\nimport { PadroesUsoMessages } from '/messages/analistas/analista-padroes-uso-messages.js';\nimport { detectarContextoProjeto } from '/contexto-projeto.js';\nimport {\n  garantirArray,\n  incrementar,\n} from '/helpers/helpers-analistas.js';\n\nimport type {\n  ContextoExecucao,\n  Estatisticas,\n  Ocorrencia,\n  TecnicaAplicarResultado,\n} from '@';\nimport { criarOcorrencia, ocorrenciaErroAnalista } from '@';\n\n// Estatísticas globais (mantidas)\nexport const estatisticasUsoGlobal: Estatisticas = {\n  requires: {},\n  consts: {},\n  exports: {},\n  vars: {},\n  lets: {},\n  evals: {},\n  withs: {},\n};\n\nexport const analistaPadroesUso = {\n  nome: 'analista-padroes-uso',\n  global: false,\n  test: (relPath: string): boolean =>\n    relPath.endsWith('.js') || relPath.endsWith('.ts'),\n  aplicar: (\n    src: string,\n    relPath: string,\n    astInput: NodePath<Node> | Node | undefined | null,\n    _fullPath?: string,\n    contexto?: ContextoExecucao,\n  ): TecnicaAplicarResultado => {\n    // Aplicar contexto inteligente - não analisar arquivos de infraestrutura desnecessariamente\n    const contextoArquivo = detectarContextoProjeto({\n      arquivo: relPath,\n      conteudo: src,\n      relPath,\n    });\n\n    // Arquivos que não precisam de análise rigorosa de padrões\n    if (\n      contextoArquivo.isTest ||\n      contextoArquivo.isConfig ||\n      contextoArquivo.frameworks.includes('types')\n    ) {\n      return null; // Ou análise mais leve\n    }\n\n    const ocorrencias: Ocorrencia[] = [];\n\n    const push = (\n      data: Omit<Ocorrencia, 'nivel' | 'origem' | 'tipo' | 'mensagem'> & {\n        tipo: string;\n        mensagem: string;\n        nivel?: Ocorrencia['nivel'];\n        origem?: string;\n        arquivo?: string;\n        relPath?: string;\n      },\n    ) => {\n      ocorrencias.push(\n        criarOcorrencia({\n          nivel: data.nivel,\n          origem: data.origem,\n          tipo: data.tipo,\n          mensagem: data.mensagem,\n          relPath: data.arquivo || data.relPath,\n          linha: data.linha,\n          coluna: data.coluna,\n        }),\n      );\n    };\n\n    const statsFlag = estatisticasUsoGlobal as Estatisticas & {\n      ___RESET_DONE___?: boolean;\n    };\n    if (!statsFlag.___RESET_DONE___) {\n      estatisticasUsoGlobal.requires = {};\n      estatisticasUsoGlobal.consts = {};\n      estatisticasUsoGlobal.exports = {};\n      estatisticasUsoGlobal.vars = {};\n      estatisticasUsoGlobal.lets = {};\n      estatisticasUsoGlobal.evals = {};\n      estatisticasUsoGlobal.withs = {};\n      statsFlag.___RESET_DONE___ = true;\n    }\n\n    // Normaliza AST recebido do executor (pode ser NodePath<Node> com .node ou o nó direto); fallback ao contexto\n    let astWrap: NodePath<Node> | Node | undefined | null = astInput as\n      | NodePath<Node>\n      | Node\n      | undefined\n      | null;\n    if (!astWrap && contexto?.arquivos) {\n      const found =\n        contexto.arquivos.find(\n          (f: { relPath: string }) => f.relPath === relPath,\n        ) || contexto.arquivos[0];\n      astWrap =\n        (found?.ast as NodePath<Node> | Node | undefined | null) || undefined;\n    }\n    const hasNodeProp = (v: unknown): v is { node?: Node } =>\n      typeof v === 'object' &&\n      v !== null &&\n      'node' in (v as Record<string, unknown>);\n    const ast: Node | undefined | null = (astWrap &&\n      (hasNodeProp(astWrap) ? astWrap.node : (astWrap as Node))) as\n      | Node\n      | undefined\n      | null;\n    if (!ast || typeof ast !== 'object') return null;\n    const tipo = (ast as Node).type;\n    if (tipo !== 'File' && tipo !== 'Program') return null; // evita traverse inválido\n\n    try {\n      traverse(ast as unknown as t.Node, {\n        enter(path: NodePath<t.Node>) {\n          const node = path.node;\n\n          if (t.isVariableDeclaration(node) && node.kind === 'var') {\n            incrementar(estatisticasUsoGlobal.vars, relPath);\n            // Menos rigoroso para testes e configs\n            const nivel = contextoArquivo.isTest ? 'info' : 'aviso';\n            push({\n              tipo: 'alerta',\n              nivel,\n              mensagem: PadroesUsoMessages.varUsage,\n              relPath,\n              linha: node.loc?.start.line,\n              coluna: node.loc?.start.column,\n            });\n          }\n          if (t.isVariableDeclaration(node) && node.kind === 'let') {\n            incrementar(estatisticasUsoGlobal.lets, relPath);\n            // Apenas info para testes, pode ser normal usar let em testes\n            if (!contextoArquivo.isTest) {\n              push({\n                tipo: 'info',\n                mensagem: PadroesUsoMessages.letUsage,\n                relPath,\n                linha: node.loc?.start.line,\n                coluna: node.loc?.start.column,\n              });\n            }\n          }\n          if (t.isVariableDeclaration(node) && node.kind === 'const') {\n            incrementar(estatisticasUsoGlobal.consts, relPath);\n          }\n          if (t.isCallExpression(node) && t.isIdentifier(node.callee)) {\n            const nome = node.callee.name;\n            if (nome === 'require') {\n              incrementar(estatisticasUsoGlobal.requires, relPath);\n              if (relPath.endsWith('.ts') && !contextoArquivo.isTest) {\n                // Menos rigoroso para testes onde require pode ser normal\n                push({\n                  tipo: 'alerta',\n                  mensagem: PadroesUsoMessages.requireInTs,\n                  relPath,\n                  linha: node.loc?.start.line,\n                  coluna: node.loc?.start.column,\n                });\n              }\n            }\n            if (nome === 'eval') {\n              incrementar(estatisticasUsoGlobal.evals, relPath);\n              push({\n                tipo: 'critico',\n                mensagem: PadroesUsoMessages.evalUsage,\n                relPath,\n                linha: node.loc?.start.line,\n                coluna: node.loc?.start.column,\n              });\n            }\n          }\n          if (\n            t.isExportNamedDeclaration(node) ||\n            t.isExportDefaultDeclaration(node)\n          ) {\n            incrementar(estatisticasUsoGlobal.exports, relPath);\n          }\n          if (\n            t.isAssignmentExpression(node) &&\n            t.isMemberExpression(node.left) &&\n            ((t.isIdentifier(node.left.object) &&\n              node.left.object.name === 'module' &&\n              t.isIdentifier(node.left.property) &&\n              node.left.property.name === 'exports') ||\n              (t.isIdentifier(node.left.object) &&\n                node.left.object.name === 'exports')) &&\n            relPath.endsWith('.ts')\n          ) {\n            push({\n              tipo: 'alerta',\n              mensagem: PadroesUsoMessages.moduleExportsInTs,\n              relPath,\n              linha: node.loc?.start.line,\n              coluna: node.loc?.start.column,\n            });\n          }\n          if (t.isWithStatement(node)) {\n            incrementar(estatisticasUsoGlobal.withs, relPath);\n            push({\n              tipo: 'critico',\n              mensagem: PadroesUsoMessages.withUsage,\n              relPath,\n              linha: node.loc?.start.line,\n              coluna: node.loc?.start.column,\n            });\n          }\n          if (\n            (t.isFunctionExpression(node) || t.isFunctionDeclaration(node)) &&\n            !node.id &&\n            !t.isArrowFunctionExpression(node) &&\n            !contextoArquivo.isTest // Testes frequentemente usam funções anônimas\n          ) {\n            push({\n              tipo: 'info',\n              mensagem: PadroesUsoMessages.anonymousFunction,\n              relPath,\n              linha: node.loc?.start.line,\n              coluna: node.loc?.start.column,\n            });\n          }\n          // Arrow function em propriedade de classe (Babel 7+: ClassProperty/PropertyDefinition)\n          if (\n            (node.type === 'ClassProperty' ||\n              (node as { type?: string }).type === 'PropertyDefinition') &&\n            'value' in (node as unknown as Record<string, unknown>) &&\n            t.isArrowFunctionExpression(\n              (node as unknown as Record<string, unknown>).value as t.Node,\n            ) &&\n            !contextoArquivo.isTest // Menos rigoroso para testes\n          ) {\n            push({\n              tipo: 'info',\n              mensagem: PadroesUsoMessages.arrowAsClassMethod,\n              relPath,\n              linha: node.loc?.start.line,\n              coluna: node.loc?.start.column,\n            });\n          }\n        },\n      });\n    } catch (e) {\n      ocorrencias.push(\n        ocorrenciaErroAnalista({\n          mensagem: PadroesUsoMessages.erroAnalise(\n            relPath,\n            (e as Error).message,\n          ),\n          relPath,\n          origem: 'analista-padroes-uso',\n        }),\n      );\n    }\n\n    return garantirArray(ocorrencias);\n  },\n};\n"]}