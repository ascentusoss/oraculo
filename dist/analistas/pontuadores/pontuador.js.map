{"version":3,"file":"pontuador.js","sourceRoot":"","sources":["../../../src/analistas/pontuadores/pontuador.ts"],"names":[],"mappings":"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","sourcesContent":["// SPDX-License-Identifier: MIT\nimport { grafoDependencias } from '/detectores/detector-dependencias.js';\nimport {\n  ARQUETIPOS,\n  normalizarCaminho,\n} from '/estrategistas/arquetipos-defs.js';\n\nimport type {\n  ArquetipoDeteccaoAnomalia,\n  ArquetipoEstruturaDef,\n  ResultadoDeteccaoArquetipo,\n  SinaisProjetoAvancados,\n} from '@';\n\nconst PENALIDADE_MISSING_REQUIRED = 20;\nconst PESO_OPTIONAL = 5;\nconst PESO_REQUIRED = 10;\nconst PESO_DEPENDENCIA = 10;\nconst PESO_PATTERN = 5;\nconst PENALIDADE_FORBIDDEN = 20;\n\nexport function scoreArquetipo(\n  def: ArquetipoEstruturaDef,\n  arquivos: string[],\n): ResultadoDeteccaoArquetipo {\n  const norm = arquivos.map((f) => String(normalizarCaminho(f)));\n  const required = def.requiredDirs || [];\n  const matchedRequired = required.filter((d: string) =>\n    norm.some((f) => f.startsWith(`${d}/`) || f === d),\n  );\n  const missingRequired = required.filter(\n    (d: string) => !matchedRequired.includes(d),\n  );\n  const optional = def.optionalDirs || [];\n  const matchedOptional = optional.filter((d: string) =>\n    norm.some((f) => f.startsWith(`${d}/`) || f === d),\n  );\n  // Verifica dependÃªncias sugeridas no grafo global (qualquer arquivo pode importar)\n  // OtimizaÃ§Ã£o: materializa um Set Ãºnico de todas as dependÃªncias para lookup O(1)\n  const allDependencies = new Set<string>();\n  for (const set of grafoDependencias.values()) {\n    for (const dep of set) {\n      allDependencies.add(dep);\n    }\n  }\n\n  function hasDependencyGlobal(dep: string): boolean {\n    return allDependencies.has(dep);\n  }\n  const dependencyMatches = (def.dependencyHints || []).filter((dep: string) =>\n    hasDependencyGlobal(dep),\n  );\n  const filePatternMatches = (def.filePresencePatterns || []).filter(\n    (pat: string) => norm.some((f) => f.includes(pat)),\n  );\n  const forbiddenPresent = (def.forbiddenDirs || []).filter((d: string) =>\n    norm.some((f) => f.startsWith(`${d}/`) || f === d),\n  );\n\n  let score = (def.pesoBase || 1) * 10;\n  score += matchedRequired.length * PESO_REQUIRED;\n  score -= missingRequired.length * PENALIDADE_MISSING_REQUIRED;\n  score += matchedOptional.length * PESO_OPTIONAL;\n  score += dependencyMatches.length * PESO_DEPENDENCIA;\n  score += filePatternMatches.length * PESO_PATTERN;\n  score -= forbiddenPresent.length * PENALIDADE_FORBIDDEN;\n\n  let explicacaoSimilaridade = '';\n  let candidatoExtra: string | undefined;\n\n  if (def.nome === 'fullstack') {\n    const temPages = matchedRequired.includes('pages');\n    const temApi = matchedRequired.includes('api');\n    const temPrisma = matchedRequired.includes('prisma');\n    const temControllers = norm.some((f) => f.includes('src/controllers'));\n    const temExpress = grafoDependencias.has('express');\n    const isHibridoCompleto =\n      temPages && temApi && temPrisma && temControllers && temExpress;\n    if (isHibridoCompleto) {\n      score += 40;\n      explicacaoSimilaridade =\n        'Estrutura hÃ­brida: fullstack + api-rest-express. Projeto combina frontend (pages/api/prisma) e backend Express/controllers.';\n      candidatoExtra = 'api-rest-express';\n      explicacaoSimilaridade +=\n        '\\nOutros candidatos potenciais detectados: fullstack, api-rest-express.';\n    } else if (temPages && temApi && temPrisma) {\n      score += 20;\n      explicacaoSimilaridade =\n        'Estrutura segue o padrÃ£o fullstack (pages/api/prisma).';\n      explicacaoSimilaridade +=\n        '\\nOutros candidatos potenciais detectados: fullstack, api-rest-express.';\n    }\n  }\n\n  if (def.nome === 'api-rest-express' && grafoDependencias.has('express')) {\n    if (\n      norm.some((f) => f.includes('pages')) &&\n      norm.some((f) => f.includes('prisma')) &&\n      norm.some((f) => f.includes('api'))\n    ) {\n      score += 40;\n      if (score > 100) score = 100;\n      explicacaoSimilaridade =\n        'Estrutura hÃ­brida: api-rest-express + fullstack. Projeto combina backend Express/controllers e frontend (pages/prisma/api).';\n      explicacaoSimilaridade +=\n        '\\nOutros candidatos potenciais detectados: fullstack, api-rest-express.';\n    } else if (\n      norm.some((f) => f.includes('pages')) &&\n      norm.some((f) => f.includes('prisma'))\n    ) {\n      score += 40;\n      if (score > 100) score = 100;\n      explicacaoSimilaridade =\n        'Estrutura hÃ­brida: api-rest-express + fullstack. Projeto combina backend Express/controllers e frontend (pages/prisma).';\n      explicacaoSimilaridade +=\n        '\\nOutros candidatos potenciais detectados: fullstack, api-rest-express.';\n    }\n  }\n\n  if (def.nome === 'api-rest-express') {\n    const temControllers = matchedRequired.includes('src/controllers');\n    const temExpress = dependencyMatches.includes('express');\n    if (temControllers && temExpress) {\n      score += 50;\n    } else if (temControllers) {\n      score += 25;\n    } else if (temExpress) {\n      score += 15;\n    }\n    if (norm.some((f) => /api|rest/i.test(f))) {\n      score += 10;\n    }\n    if (score >= 100) {\n      explicacaoSimilaridade =\n        'Estrutura segue o padrÃ£o oficial api-rest-express.';\n    } else if (score >= 70) {\n      // Para simplificar a validaÃ§Ã£o em testes, adotamos uma formulaÃ§Ã£o curta prÃ³xima do \"padrÃ£o oficial\"\n      explicacaoSimilaridade =\n        'Estrutura segue o padrÃ£o api-rest-express com pequenas diferenÃ§as.';\n    } else if (score >= 40) {\n      explicacaoSimilaridade =\n        'Estrutura parcialmente compatÃ­vel com o padrÃ£o api-rest-express. Recomenda-se padronizar src/controllers, dependÃªncia express e rotas api/rest.';\n    } else {\n      explicacaoSimilaridade =\n        'Estrutura personalizada, mas o padrÃ£o mais prÃ³ximo Ã© api-rest-express. Recomenda-se seguir boas prÃ¡ticas para facilitar manutenÃ§Ã£o.';\n    }\n  }\n\n  // ExplicaÃ§Ã£o genÃ©rica quando hÃ¡ penalidades/ausÃªncias e ainda nÃ£o foi preenchida\n  if (!explicacaoSimilaridade) {\n    const partes: string[] = [];\n    if (missingRequired.length > 0) {\n      partes.push(\n        `DiretÃ³rios obrigatÃ³rios ausentes/faltantes: ${missingRequired.join(', ')}.`,\n      );\n    }\n    if (forbiddenPresent.length > 0) {\n      partes.push(\n        `DiretÃ³rios nÃ£o permitidos/proibidos presentes: ${forbiddenPresent.join(', ')}.`,\n      );\n    }\n    if (partes.length > 0) {\n      explicacaoSimilaridade = `${partes.join(' ')} Estrutura parcialmente compatÃ­vel, personalizada ou com diferenÃ§as.`;\n    }\n  }\n\n  // Importante: manter score negativo quando penalidades superam acertos,\n  // pois alguns testes validam score <= 0 para cenÃ¡rios de penalizaÃ§Ã£o.\n  const maxPossible =\n    (def.pesoBase || 1) * 10 +\n    (def.requiredDirs?.length || 0) * PESO_REQUIRED +\n    (def.optionalDirs?.length || 0) * PESO_OPTIONAL +\n    (def.dependencyHints?.length || 0) * PESO_DEPENDENCIA +\n    (def.filePresencePatterns?.length || 0) * PESO_PATTERN +\n    30;\n  const confidence =\n    maxPossible > 0\n      ? Math.min(100, Math.round((score / maxPossible) * 100))\n      : 0;\n\n  const raizFiles = norm.filter(\n    (p) => typeof p === 'string' && !p.includes('/'),\n  );\n  const allowed = new Set([...(def.rootFilesAllowed || [])]);\n  const anomalias: ArquetipoDeteccaoAnomalia[] = [];\n  for (const rf of raizFiles) {\n    if (typeof rf === 'string' && rf.trim() !== '' && !allowed.has(rf)) {\n      anomalias.push({\n        path: rf,\n        motivo: 'Arquivo na raiz nÃ£o permitido para este arquÃ©tipo',\n      });\n    }\n  }\n  let sugestaoPadronizacao = '';\n  if (def.nome === 'api-rest-express') {\n    if (!matchedRequired.includes('src/controllers')) {\n      sugestaoPadronizacao +=\n        'SugestÃ£o: adicione o diretÃ³rio src/controllers para seguir o padrÃ£o api-rest-express.\\n';\n    }\n    if (!dependencyMatches.includes('express')) {\n      sugestaoPadronizacao +=\n        'SugestÃ£o: adicione express nas dependÃªncias para seguir o padrÃ£o api-rest-express.\\n';\n    }\n    if (!norm.some((f) => /api|rest/i.test(f))) {\n      sugestaoPadronizacao +=\n        'SugestÃ£o: utilize nomes de arquivos e rotas que incluam \"api\" ou \"rest\" para reforÃ§ar o padrÃ£o.\\n';\n    }\n  }\n\n  return {\n    nome: def.nome,\n    score,\n    confidence,\n    matchedRequired,\n    missingRequired,\n    matchedOptional,\n    dependencyMatches,\n    filePatternMatches,\n    forbiddenPresent,\n    anomalias,\n    sugestaoPadronizacao,\n    explicacaoSimilaridade,\n    descricao: def.descricao || '',\n    candidatoExtra,\n  };\n}\n\nexport function pontuarTodos(arquivos: string[]): ResultadoDeteccaoArquetipo[] {\n  const resultados: ResultadoDeteccaoArquetipo[] = [];\n  for (const def of ARQUETIPOS) {\n    const resultado = scoreArquetipo(def, arquivos);\n    resultados.push(resultado);\n    if (resultado.candidatoExtra) {\n      const extra = ARQUETIPOS.find(\n        (a: ArquetipoEstruturaDef) => a.nome === resultado.candidatoExtra,\n      );\n      if (extra) {\n        const extraResultado = scoreArquetipo(extra, arquivos);\n        if (!resultados.some((x) => x.nome === extraResultado.nome))\n          resultados.push(extraResultado);\n      }\n    }\n  }\n  // Filtro: manter apenas candidatos que apresentem algum sinal (match/forbidden/pattern/dep)\n  return resultados.filter(\n    (resultado) =>\n      (resultado.matchedRequired?.length || 0) > 0 ||\n      (resultado.matchedOptional?.length || 0) > 0 ||\n      (resultado.dependencyMatches?.length || 0) > 0 ||\n      (resultado.filePatternMatches?.length || 0) > 0 ||\n      (resultado.forbiddenPresent?.length || 0) > 0,\n  );\n}\n\n// VersÃ£o avanÃ§ada do scoreArquetipo com anÃ¡lise de sinais do projeto\n\nexport function scoreArquetipoAvancado(\n  def: ArquetipoEstruturaDef,\n  arquivos: string[],\n  sinaisAvancados?: SinaisProjetoAvancados,\n): ResultadoDeteccaoArquetipo {\n  // Usa a implementaÃ§Ã£o base\n  const resultadoBase = scoreArquetipo(def, arquivos);\n\n  // Se nÃ£o hÃ¡ sinais avanÃ§ados, retorna resultado base\n  if (!sinaisAvancados) {\n    return resultadoBase;\n  }\n\n  // Clona o resultado base para adicionar anÃ¡lises avanÃ§adas\n  let score = resultadoBase.score;\n  let explicacao = resultadoBase.explicacaoSimilaridade || '';\n  const frameworks = sinaisAvancados.frameworksDetectados || [];\n  const deps = sinaisAvancados.dependencias || [];\n  const scripts = sinaisAvancados.scripts || [];\n  const detalhes = sinaisAvancados.detalhes || {};\n\n  // BONUS INTELIGENTE: Considerar sinais avanÃ§ados para pontuaÃ§Ã£o contextual\n  score += calcularBonusContextual(def, sinaisAvancados);\n\n  // AnÃ¡lise especÃ­fica por arquÃ©tipo\n  switch (def.nome) {\n    case 'next-js':\n      if (frameworks.includes('Next.js') || deps.includes('next')) {\n        score += 30;\n        explicacao +=\n          '\\nâœ“ Framework Next.js detectado via dependÃªncias e anÃ¡lise de cÃ³digo.';\n      }\n      if (\n        sinaisAvancados.pastasPadrao?.includes('pages') ||\n        sinaisAvancados.pastasPadrao?.includes('app')\n      ) {\n        score += 20;\n        explicacao +=\n          '\\nâœ“ Estrutura de roteamento Next.js (pages ou app dir) confirmada.';\n      }\n      // BÃ´nus por tecnologias detectadas\n      if (\n        sinaisAvancados.tecnologiasDominantes.includes('frontend-framework')\n      ) {\n        score += 15;\n      }\n      break;\n\n    case 'fullstack':\n      // DetecÃ§Ã£o especÃ­fica para Next.js fullstack\n      if (frameworks.includes('Next.js') || deps.includes('next')) {\n        score += 35;\n        explicacao +=\n          '\\nâœ“ Framework Next.js detectado - aplicaÃ§Ã£o fullstack moderna.';\n      }\n      if (sinaisAvancados.pastasPadrao?.includes('api')) {\n        score += 25;\n        explicacao += '\\nâœ“ API routes Next.js detectadas - backend integrado.';\n      }\n      if (sinaisAvancados.pastasPadrao?.includes('pages')) {\n        score += 20;\n        explicacao += '\\nâœ“ PÃ¡ginas Next.js (Pages Router) detectadas.';\n      }\n      if (sinaisAvancados.pastasPadrao?.includes('app')) {\n        score += 25;\n        explicacao += '\\nâœ“ App Router Next.js detectado - arquitetura moderna.';\n      }\n      if (deps.includes('prisma') || deps.includes('/client')) {\n        score += 20;\n        explicacao += '\\nâœ“ Prisma ORM detectado - banco de dados integrado.';\n      }\n      if (\n        sinaisAvancados.tecnologiasDominantes.includes('frontend-framework')\n      ) {\n        score += 15;\n        explicacao += '\\nâœ“ Tecnologias frontend modernas detectadas.';\n      }\n      if (sinaisAvancados.tecnologiasDominantes.includes('backend-api')) {\n        score += 15;\n        explicacao += '\\nâœ“ APIs backend detectadas no fullstack.';\n      }\n      break;\n\n    case 'vite':\n      if (frameworks.includes('Vite') || deps.includes('vite')) {\n        score += 30;\n        explicacao += '\\nâœ“ Build tool Vite detectado.';\n      }\n      if (\n        sinaisAvancados.arquivosConfig?.some((f) => f.includes('vite.config'))\n      ) {\n        score += 15;\n        explicacao += '\\nâœ“ Arquivo de configuraÃ§Ã£o Vite presente.';\n      }\n      break;\n\n    case 'api-rest-express':\n      if (frameworks.includes('Express') || deps.includes('express')) {\n        score += 25;\n        explicacao += '\\nâœ“ Framework Express detectado.';\n      }\n      if (frameworks.includes('Fastify') || deps.includes('fastify')) {\n        score += 25;\n        explicacao += '\\nâœ“ Framework Fastify detectado - alta performance.';\n      }\n      if (frameworks.includes('NestJS') || deps.includes('/core')) {\n        score += 30;\n        explicacao +=\n          '\\nâœ“ Framework NestJS detectado - arquitetura enterprise.';\n      }\n      if (frameworks.includes('Koa') || deps.includes('koa')) {\n        score += 20;\n        explicacao += '\\nâœ“ Framework Koa detectado.';\n      }\n      if (frameworks.includes('Hapi') || deps.includes('/hapi')) {\n        score += 20;\n        explicacao += '\\nâœ“ Framework Hapi detectado.';\n      }\n      if (\n        sinaisAvancados.pastasPadrao?.includes('routes') ||\n        sinaisAvancados.pastasPadrao?.includes('api') ||\n        sinaisAvancados.pastasPadrao?.includes('controllers')\n      ) {\n        score += 15;\n        explicacao += '\\nâœ“ Estrutura de rotas/controllers API detectada.';\n      }\n      if (\n        deps.includes('cors') ||\n        deps.includes('helmet') ||\n        deps.includes('/cors')\n      ) {\n        score += 10;\n        explicacao += '\\nâœ“ Middleware de seguranÃ§a/CORS presente.';\n      }\n      if (deps.includes('joi') || deps.includes('/joi')) {\n        score += 10;\n        explicacao += '\\nâœ“ ValidaÃ§Ã£o de dados detectada.';\n      }\n      if (\n        deps.includes('prisma') ||\n        deps.includes('mongoose') ||\n        deps.includes('typeorm')\n      ) {\n        score += 15;\n        explicacao += '\\nâœ“ ORM/Database layer detectado.';\n      }\n      // BÃ´nus por padrÃµes arquiteturais\n      if (sinaisAvancados.padroesArquiteturais.includes('repository-service')) {\n        score += 10;\n        explicacao += '\\nâœ“ PadrÃ£o Repository/Service compatÃ­vel com APIs REST.';\n      }\n      if (sinaisAvancados.tecnologiasDominantes.includes('backend-api')) {\n        score += 20;\n        explicacao += '\\nâœ“ Foco em desenvolvimento backend/API confirmado.';\n      }\n      break;\n\n    case 'vue-spa':\n      // DetecÃ§Ã£o especÃ­fica para Vue.js SPA\n      if (frameworks.includes('Vue') || deps.includes('vue')) {\n        score += 30;\n        explicacao += '\\nâœ“ Framework Vue.js detectado - SPA moderna.';\n      }\n      if (deps.includes('vue-router')) {\n        score += 20;\n        explicacao += '\\nâœ“ Vue Router detectado - roteamento SPA.';\n      }\n      if (deps.includes('vuex') || deps.includes('pinia')) {\n        score += 20;\n        explicacao += '\\nâœ“ State management detectado (Vuex/Pinia).';\n      }\n      if (deps.includes('/cli-service') || deps.includes('vite')) {\n        score += 15;\n        explicacao += '\\nâœ“ Build tool Vue detectado (CLI/Vite).';\n      }\n      if (sinaisAvancados.pastasPadrao?.includes('src/components')) {\n        score += 15;\n        explicacao += '\\nâœ“ Estrutura de componentes Vue detectada.';\n      }\n      if (sinaisAvancados.pastasPadrao?.includes('src/composables')) {\n        score += 15;\n        explicacao += '\\nâœ“ Composables Vue 3 detectados - arquitetura moderna.';\n      }\n      if (sinaisAvancados.pastasPadrao?.includes('src/views')) {\n        score += 10;\n        explicacao += '\\nâœ“ Estrutura de views/pages detectada.';\n      }\n      if (deps.includes('nuxt') || deps.includes('nuxt3')) {\n        score += 25;\n        explicacao += '\\nâœ“ Nuxt.js detectado - SSR/SSG framework.';\n      }\n      if (\n        sinaisAvancados.tecnologiasDominantes.includes('frontend-framework')\n      ) {\n        score += 15;\n        explicacao += '\\nâœ“ Foco em desenvolvimento frontend confirmado.';\n      }\n      break;\n\n    case 'react-app':\n      if (frameworks.includes('React') || deps.includes('react')) {\n        score += 30;\n        explicacao += '\\nâœ“ Framework React detectado.';\n      }\n      if (\n        sinaisAvancados.pastasPadrao?.includes('components') ||\n        sinaisAvancados.pastasPadrao?.includes('src')\n      ) {\n        score += 15;\n        explicacao += '\\nâœ“ Estrutura React tÃ­pica com components detectada.';\n      }\n      // BÃ´nus por tecnologias detectadas\n      if (\n        sinaisAvancados.tecnologiasDominantes.includes('frontend-framework')\n      ) {\n        score += 15;\n      }\n      break;\n\n    case 'vue-app':\n      if (frameworks.includes('Vue') || deps.includes('vue')) {\n        score += 30;\n        explicacao += '\\nâœ“ Framework Vue detectado.';\n      }\n      if (\n        sinaisAvancados.pastasPadrao?.includes('components') ||\n        sinaisAvancados.arquivosPadrao?.some((f) => f.endsWith('.vue'))\n      ) {\n        score += 15;\n        explicacao += '\\nâœ“ Estrutura Vue com components detectada.';\n      }\n      break;\n\n    case 'typescript-lib':\n      if (sinaisAvancados.tipos?.length > 0) {\n        score += 20;\n        explicacao += `\\nâœ“ Tipos TypeScript detectados (${sinaisAvancados.tipos.length} tipos).`;\n      }\n      if (\n        deps.includes('typescript') ||\n        sinaisAvancados.arquivosConfig?.some((f) => f.includes('tsconfig'))\n      ) {\n        score += 15;\n        explicacao += '\\nâœ“ ConfiguraÃ§Ã£o TypeScript presente.';\n      }\n      if (scripts.includes('build') || scripts.includes('compile')) {\n        score += 10;\n        explicacao += '\\nâœ“ Scripts de build detectados.';\n      }\n      // BÃ´nus por TypeScript avanÃ§ado\n      if (\n        sinaisAvancados.tecnologiasDominantes.includes('typescript-advanced')\n      ) {\n        score += 20;\n        explicacao += '\\nâœ“ Uso avanÃ§ado de TypeScript detectado.';\n      }\n      break;\n\n    case 'monorepo':\n      if (\n        sinaisAvancados.arquivosConfig?.some(\n          (f) => f.includes('lerna.json') || f.includes('pnpm-workspace'),\n        )\n      ) {\n        score += 25;\n        explicacao += '\\nâœ“ ConfiguraÃ§Ã£o de monorepo detectada (Lerna ou pnpm).';\n      }\n      if (\n        sinaisAvancados.pastasPadrao?.includes('packages') ||\n        sinaisAvancados.pastasPadrao?.includes('apps')\n      ) {\n        score += 20;\n        explicacao += '\\nâœ“ Estrutura de workspaces/packages detectada.';\n      }\n      // BÃ´nus por complexidade alta\n      if (sinaisAvancados.complexidadeEstrutura === 'alta') {\n        score += 20;\n        explicacao +=\n          '\\nâœ“ Complexidade estrutural alta compatÃ­vel com monorepo.';\n      }\n      break;\n\n    case 'cli':\n      if (\n        sinaisAvancados.pastasPadrao?.includes('bin') ||\n        sinaisAvancados.pastasPadrao?.includes('cli')\n      ) {\n        score += 20;\n        explicacao += '\\nâœ“ Estrutura de CLI detectada (bin ou cli).';\n      }\n      if (\n        deps.includes('commander') ||\n        deps.includes('yargs') ||\n        deps.includes('inquirer')\n      ) {\n        score += 15;\n        explicacao +=\n          '\\nâœ“ Biblioteca de CLI detectada (commander/yargs/inquirer).';\n      }\n      // BÃ´nus por padrÃµes CLI\n      if (sinaisAvancados.padroesArquiteturais.includes('cli-patterns')) {\n        score += 25;\n        explicacao += '\\nâœ“ PadrÃµes especÃ­ficos de CLI detectados.';\n      }\n      // Penalizar se tem estrutura web\n      if (\n        sinaisAvancados.tecnologiasDominantes.includes('frontend-framework')\n      ) {\n        score -= 30;\n        explicacao += '\\nâœ— Estrutura web detectada, incompatÃ­vel com CLI.';\n      }\n      break;\n  }\n\n  // AnÃ¡lises genÃ©ricas aplicÃ¡veis a todos os arquÃ©tipos\n  if (detalhes.testRunner) {\n    score += 5;\n    explicacao += `\\nâœ“ Test runner detectado: ${detalhes.testRunner}.`;\n  }\n\n  if (detalhes.linter) {\n    score += 3;\n    explicacao += `\\nâœ“ Linter configurado: ${detalhes.linter}.`;\n  }\n\n  if (detalhes.bundler && !['vite', 'webpack', 'rollup'].includes(def.nome)) {\n    score += 5;\n    explicacao += `\\nâœ“ Bundler detectado: ${detalhes.bundler}.`;\n  }\n\n  // Detectar complexidade do projeto baseado nos sinais\n  const complexidade =\n    (sinaisAvancados.funcoes || 0) +\n    (sinaisAvancados.classes || 0) +\n    (sinaisAvancados.variaveis || 0);\n\n  if (complexidade > 100) {\n    explicacao += `\\nğŸ“Š Projeto de complexidade alta (${complexidade} elementos).`;\n  } else if (complexidade > 50) {\n    explicacao += `\\nğŸ“Š Projeto de complexidade mÃ©dia (${complexidade} elementos).`;\n  }\n\n  // Recalcular confidence baseado no novo score\n  const maxPossible =\n    (def.pesoBase || 1) * 10 +\n    (def.requiredDirs?.length || 0) * PESO_REQUIRED +\n    (def.optionalDirs?.length || 0) * PESO_OPTIONAL +\n    (def.dependencyHints?.length || 0) * PESO_DEPENDENCIA +\n    (def.filePresencePatterns?.length || 0) * PESO_PATTERN +\n    100; // Adiciona margem para anÃ¡lise avanÃ§ada\n\n  const confidence =\n    maxPossible > 0\n      ? Math.min(100, Math.round((score / maxPossible) * 100))\n      : 0;\n\n  return {\n    ...resultadoBase,\n    score,\n    confidence,\n    explicacaoSimilaridade: explicacao.trim(),\n  };\n}\n\nfunction calcularBonusContextual(\n  def: ArquetipoEstruturaDef,\n  sinais: SinaisProjetoAvancados,\n): number {\n  let bonus = 0;\n\n  // BÃ´nus baseado na complexidade da estrutura\n  if (def.nome === 'monorepo' && sinais.complexidadeEstrutura === 'alta') {\n    bonus += 20;\n  }\n\n  // Penalizar estruturas simples para arquetipos complexos\n  if (\n    (def.nome === 'fullstack' || def.nome === 'monorepo') &&\n    sinais.complexidadeEstrutura === 'baixa'\n  ) {\n    bonus -= 15;\n  }\n\n  // BÃ´nus por alinhamento de padrÃµes arquiteturais\n  if (\n    def.nome === 'api-rest-express' &&\n    sinais.padroesArquiteturais.includes('repository-service')\n  ) {\n    bonus += 15;\n  }\n\n  if (\n    def.nome === 'cli' &&\n    sinais.padroesArquiteturais.includes('cli-patterns')\n  ) {\n    bonus += 20;\n  }\n\n  // Penalizar incompatibilidades tecnolÃ³gicas\n  if (\n    def.nome === 'cli' &&\n    sinais.tecnologiasDominantes.includes('frontend-framework')\n  ) {\n    bonus -= 25;\n  }\n\n  if (\n    def.nome === 'typescript-lib' &&\n    sinais.tecnologiasDominantes.includes('frontend-framework')\n  ) {\n    bonus -= 20;\n  }\n\n  return bonus;\n}\n\nexport function pontuarTodosAvancado(\n  arquivos: string[],\n  sinaisAvancados?: SinaisProjetoAvancados,\n): ResultadoDeteccaoArquetipo[] {\n  const resultados: ResultadoDeteccaoArquetipo[] = [];\n  for (const def of ARQUETIPOS) {\n    const resultado = scoreArquetipoAvancado(def, arquivos, sinaisAvancados);\n    resultados.push(resultado);\n    if (resultado.candidatoExtra) {\n      const extra = ARQUETIPOS.find(\n        (a: ArquetipoEstruturaDef) => a.nome === resultado.candidatoExtra,\n      );\n      if (extra) {\n        const extraResultado = scoreArquetipoAvancado(\n          extra,\n          arquivos,\n          sinaisAvancados,\n        );\n        if (!resultados.some((x) => x.nome === extraResultado.nome))\n          resultados.push(extraResultado);\n      }\n    }\n  }\n  // Filtro: manter apenas candidatos que apresentem algum sinal (match/forbidden/pattern/dep)\n  return resultados.filter(\n    (resultado) =>\n      (resultado.matchedRequired?.length || 0) > 0 ||\n      (resultado.matchedOptional?.length || 0) > 0 ||\n      (resultado.dependencyMatches?.length || 0) > 0 ||\n      (resultado.filePatternMatches?.length || 0) > 0 ||\n      (resultado.forbiddenPresent?.length || 0) > 0,\n  );\n}\n"]}