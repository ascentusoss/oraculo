{"version":3,"file":"detector-dependencias.js","sourceRoot":"","sources":["../../../src/analistas/detectores/detector-dependencias.ts"],"names":[],"mappings":"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","sourcesContent":["// SPDX-License-Identifier: MIT\nimport path from 'node:path';\n\nimport type { NodePath } from '/traverse';\nimport type * as t from '/types';\nimport { config } from '/config/config.js';\nimport { traverse } from '/config/traverse.js';\nimport { DetectorDependenciasMessages } from '/messages/analistas/detector-dependencias-messages.js';\n\nimport type { ContextoExecucao, Ocorrencia, TecnicaAplicarResultado } from '@';\n\nexport const grafoDependencias = new Map<string, Set<string>>();\n\n/**\n * Registro global de imports identificados como usados via registro dinâmico.\n * Chave: relPath do arquivo, Valor: Set de nomes de imports considerados usados.\n * Outros detectores podem consultar antes de reportar \"import não usado\".\n */\nexport const importsUsadosDinamicamente = new Map<string, Set<string>>();\n\n/**\n * Normaliza o caminho de import para uma chave consistente.\n */\n\nfunction normalizarPosix(p: string): string {\n  return path.posix.normalize((p || '').replace(/\\\\/g, '/'));\n}\n\nfunction ehImportSomenteTipo(node: t.ImportDeclaration): boolean {\n  const kind = (node as unknown as { importKind?: string }).importKind;\n  if (kind === 'type') return true;\n  // Caso: import { type A } from './x'\n  const specifiers = node.specifiers || [];\n  if (specifiers.length === 0) return false; // import side-effect sempre é runtime\n  return specifiers.every((s) => {\n    const sk = (s as unknown as { importKind?: string }).importKind;\n    return sk === 'type';\n  });\n}\n\nfunction resolverArquivoExistente(\n  caminho: string,\n  arquivosExistentes: Set<string>,\n): string {\n  const alvo = normalizarPosix(caminho);\n  if (arquivosExistentes.has(alvo)) return alvo;\n\n  const ext = path.posix.extname(alvo);\n  const base = ext ? alvo.slice(0, -ext.length) : alvo;\n\n  // Padrão TS ESM: importar \"./x.js\" em .ts, mas o arquivo real é \"./x.ts\"\n  if (ext === '.js' || ext === '.mjs' || ext === '.cjs') {\n    const candidates = [\n      `${base}.ts`,\n      `${base}.tsx`,\n      `${base}.js`,\n      `${base}.mjs`,\n      `${base}.cjs`,\n    ];\n    for (const c of candidates) {\n      const n = normalizarPosix(c);\n      if (arquivosExistentes.has(n)) return n;\n    }\n  }\n\n  if (ext === '.jsx') {\n    const candidates = [`${base}.tsx`, `${base}.ts`, `${base}.jsx`];\n    for (const c of candidates) {\n      const n = normalizarPosix(c);\n      if (arquivosExistentes.has(n)) return n;\n    }\n  }\n\n  // Sem extensão: tenta variações comuns e index.*\n  if (!ext) {\n    const candidates = [\n      `${alvo}.ts`,\n      `${alvo}.tsx`,\n      `${alvo}.js`,\n      `${alvo}.jsx`,\n      `${alvo}.mjs`,\n      `${alvo}.cjs`,\n      `${alvo}.d.ts`,\n      `${alvo}/index.ts`,\n      `${alvo}/index.tsx`,\n      `${alvo}/index.js`,\n      `${alvo}/index.mjs`,\n      `${alvo}/index.cjs`,\n    ];\n    for (const c of candidates) {\n      const n = normalizarPosix(c);\n      if (arquivosExistentes.has(n)) return n;\n    }\n  }\n\n  return alvo;\n}\n\nfunction resolverModulo(\n  mod: string,\n  relPath: string,\n  arquivosExistentes?: Set<string>,\n): { key: string; existe: boolean } {\n  // Externo (node_modules / builtin): mantém como está\n  if (!mod.startsWith('.') && !mod.startsWith('/')) {\n    return { key: mod, existe: true };\n  }\n\n  // Import absoluto: trata como caminho normalizado\n  if (mod.startsWith('/')) {\n    const absNorm = normalizarPosix(mod);\n    if (!arquivosExistentes) return { key: absNorm, existe: true };\n    const resolved = resolverArquivoExistente(absNorm, arquivosExistentes);\n    return { key: resolved, existe: arquivosExistentes.has(resolved) };\n  }\n\n  // Relativo\n  const fromDir = normalizarPosix(path.posix.dirname(normalizarPosix(relPath)));\n  const joined = normalizarPosix(path.posix.join(fromDir, mod));\n  if (!arquivosExistentes) return { key: joined, existe: true };\n  const resolved = resolverArquivoExistente(joined, arquivosExistentes);\n  return { key: resolved, existe: arquivosExistentes.has(resolved) };\n}\n\nfunction verificarCicloConfirmado(\n  ciclo: string[],\n  grafo: Map<string, Set<string>>,\n  arquivosExistentes?: Set<string>,\n): boolean {\n  if (ciclo.length < 2) return false;\n  if (!arquivosExistentes) return true; // sem contexto suficiente: não bloqueia\n\n  // 1) nós existem no conjunto de arquivos\n  for (const no of ciclo) {\n    const n = normalizarPosix(no);\n    if (!arquivosExistentes.has(n)) return false;\n  }\n\n  // 2) arestas existem no grafo (forma normalizada)\n  for (let i = 0; i < ciclo.length - 1; i++) {\n    const de = normalizarPosix(ciclo[i]);\n    const para = normalizarPosix(ciclo[i + 1]);\n    const deps = grafo.get(de);\n    if (!deps) return false;\n    const depsNorm = new Set(Array.from(deps).map((d) => normalizarPosix(d)));\n    if (!depsNorm.has(para)) return false;\n  }\n\n  return true;\n}\n\n/**\n * Detecta ciclos complexos no grafo de dependências usando DFS aprimorado\n *\n * Melhorias para reduzir falsos positivos:\n * - Normaliza caminhos antes de comparar\n * - Resolve caminhos relativos para absolutos\n * - Ignora dependências de tipo (type-only imports)\n * - Valida que o ciclo é real (todos os nós existem no grafo)\n * - Retorna caminho completo e limpo do ciclo\n *\n *  inicio - Arquivo inicial para busca\n *  grafo - Grafo de dependências completo\n *  maxProfundidade - Profundidade máxima de busca (evita loops infinitos)\n *  Array com caminho do ciclo, ou vazio se não houver ciclo\n */\nfunction detectarCicloComplexo(\n  inicio: string,\n  grafo: Map<string, Set<string>>,\n  maxProfundidade = 5,\n): string[] {\n  const visitados = new Set<string>();\n  const pilha = new Set<string>();\n  const caminho: string[] = [];\n\n  // Normaliza o caminho inicial\n  const inicioNormalizado = path.normalize(inicio).replace(/\\\\/g, '/');\n\n  // Helper para resolver caminho relativo a partir de um arquivo\n  function resolverCaminho(from: string, to: string): string {\n    if (to.startsWith('.')) {\n      const fromDir = path.dirname(from);\n      const resolved = path.join(fromDir, to);\n      return path.normalize(resolved).replace(/\\\\/g, '/');\n    }\n    return path.normalize(to).replace(/\\\\/g, '/');\n  }\n\n  // Helper para encontrar dependências no grafo mesmo com paths diferentes\n  function buscarDependencias(arquivo: string): Set<string> | undefined {\n    const normalizado = path.normalize(arquivo).replace(/\\\\/g, '/');\n\n    // Tenta buscar diretamente\n    if (grafo.has(arquivo)) return grafo.get(arquivo);\n    if (grafo.has(normalizado)) return grafo.get(normalizado);\n\n    // Tenta encontrar chave equivalente no grafo\n    for (const [chave, deps] of grafo.entries()) {\n      if (path.normalize(chave).replace(/\\\\/g, '/') === normalizado) {\n        return deps;\n      }\n    }\n\n    return undefined;\n  }\n\n  function dfs(atual: string, profundidade: number): boolean {\n    if (profundidade > maxProfundidade) return false;\n\n    // Normaliza o caminho atual para comparação consistente\n    const atualNormalizado = path.normalize(atual).replace(/\\\\/g, '/');\n\n    if (pilha.has(atualNormalizado)) {\n      // Ciclo encontrado - verificar se é real\n      const indiceCiclo = caminho.findIndex(\n        (p) => path.normalize(p).replace(/\\\\/g, '/') === atualNormalizado,\n      );\n      if (indiceCiclo >= 0) {\n        // Adiciona o nó atual para fechar o ciclo\n        caminho.push(atualNormalizado);\n        return true;\n      }\n      return false;\n    }\n\n    if (visitados.has(atualNormalizado)) return false;\n\n    visitados.add(atualNormalizado);\n    pilha.add(atualNormalizado);\n    caminho.push(atualNormalizado);\n\n    const dependencias = buscarDependencias(atual);\n    if (dependencias) {\n      for (const dep of dependencias) {\n        // Ignora dependências externas (node_modules)\n        if (\n          !dep.startsWith('.') &&\n          !dep.startsWith('/') &&\n          !dep.startsWith('src')\n        )\n          continue;\n\n        // Resolve e normaliza a dependência\n        const depResolvida = resolverCaminho(atualNormalizado, dep);\n\n        if (dfs(depResolvida, profundidade + 1)) {\n          return true;\n        }\n      }\n    }\n\n    pilha.delete(atualNormalizado);\n    caminho.pop();\n    return false;\n  }\n\n  if (dfs(inicioNormalizado, 0)) {\n    // Extrai apenas a parte cíclica do caminho\n    const ultimoNo = caminho[caminho.length - 1];\n    const indiceCiclo = caminho.findIndex(\n      (p) => path.normalize(p).replace(/\\\\/g, '/') === ultimoNo,\n    );\n\n    if (indiceCiclo >= 0) {\n      const cicloCompleto = caminho.slice(indiceCiclo);\n\n      // Valida que todos os nós do ciclo existem no grafo\n      const cicloValido = cicloCompleto.every((no) => {\n        const normalizado = path.normalize(no).replace(/\\\\/g, '/');\n        return (\n          grafo.has(no) ||\n          grafo.has(normalizado) ||\n          Array.from(grafo.keys()).some(\n            (k) => path.normalize(k).replace(/\\\\/g, '/') === normalizado,\n          )\n        );\n      });\n\n      return cicloValido ? cicloCompleto : [];\n    }\n  }\n\n  return [];\n}\n\n/**\n * Verifica se um import é usado em padrões de registro dinâmico\n * (ex: registry.register, app.use, plugin.registerPlugin, client.on)\n *\n * Cobertura expandida para Discord.js, Express, Fastify, e outros frameworks:\n * - registry.register(handler) | register(handler)\n * - app.use(middleware) | router.use(handler)\n * - client.on('event', handler)\n * - app.get/post(path, handler)\n *\n *  Exportada para reuso em outros detectores\n */\nexport function isUsadoEmRegistroDinamico(\n  src: string,\n  importName: string,\n): boolean {\n  // Padrões comuns de registro dinâmico (escapar ponto literal com \\\\.)\n  const padroesRegistro = [\n    // Genéricos\n    `register\\\\(\\\\s*${importName}`,\n    `\\\\.register\\\\(\\\\s*${importName}`,\n    `use\\\\(\\\\s*${importName}`,\n    `\\\\.use\\\\(\\\\s*${importName}`,\n    `registerPlugin\\\\(\\\\s*${importName}`,\n    `addPlugin\\\\(\\\\s*${importName}`,\n    `apply\\\\(\\\\s*${importName}`,\n    `\\\\.apply\\\\(\\\\s*${importName}`,\n    `load\\\\(\\\\s*${importName}`,\n    `\\\\.load\\\\(\\\\s*${importName}`,\n    // Discord.js event handlers\n    `\\\\.on\\\\(\\\\s*[^,]+,\\\\s*${importName}\\\\s*\\\\)`,\n    `\\\\.once\\\\(\\\\s*[^,]+,\\\\s*${importName}\\\\s*\\\\)`,\n    // Express/Fastify routes (app.get/post/put/delete)\n    `\\\\.(?:get|post|put|delete|patch|options|head)\\\\(\\\\s*[^,]+,\\\\s*${importName}\\\\s*\\\\)`,\n    // Array spread/push pattern: [...handlers, importName] | handlers.push(importName)\n    `\\\\[\\\\s*[^\\\\]]*${importName}[^\\\\]]*\\\\]`,\n    `\\\\.push\\\\(\\\\s*${importName}\\\\s*\\\\)`,\n    // NestJS patterns\n    `providers\\\\s*:\\\\s*\\\\[[^\\\\]]*${importName}[^\\\\]]*\\\\]`,\n    `controllers\\\\s*:\\\\s*\\\\[[^\\\\]]*${importName}[^\\\\]]*\\\\]`,\n    `imports\\\\s*:\\\\s*\\\\[[^\\\\]]*${importName}[^\\\\]]*\\\\]`,\n    `exports\\\\s*:\\\\s*\\\\[[^\\\\]]*${importName}[^\\\\]]*\\\\]`,\n    // Vue/React component registration\n    `components\\\\s*:\\\\s*\\\\{[^}]*${importName}[^}]*\\\\}`,\n    // Redux/Zustand\n    `combineReducers\\\\s*\\\\(\\\\s*\\\\{[^}]*${importName}[^}]*\\\\}`,\n    // Generic object assignment where import is value\n    `:\\\\s*${importName}\\\\s*[,}]`,\n  ];\n\n  return padroesRegistro.some((padrao) => new RegExp(padrao).test(src));\n}\n\n/**\n * Analisa dependências do arquivo (import/require), detecta padrões problemáticos e atualiza grafo global.\n * Retorna ocorrências para imports/require suspeitos, mistos, circulares, etc.\n */\nexport const detectorDependencias = {\n  nome: 'detector-dependencias',\n  test(relPath: string): boolean {\n    return relPath.endsWith('.ts') || relPath.endsWith('.js');\n  },\n\n  aplicar(\n    src: string,\n    relPath: string,\n    ast: NodePath | null,\n    _fullPath?: string,\n    contexto?: ContextoExecucao,\n  ): TecnicaAplicarResultado {\n    if (!ast) return [];\n\n    const ocorrencias: Ocorrencia[] = [];\n    const tiposImport: Set<'import' | 'require'> = new Set();\n    const arquivosExistentes = contexto\n      ? new Set(contexto.arquivos.map((f) => f.relPath))\n      : undefined;\n    // Conjunto de dependências (criado sob demanda quando houver refs)\n    let depsSet: Set<string> | undefined = grafoDependencias.get(relPath);\n\n    // Rastreia imports para detectar uso dinâmico\n    const importsDeclarados = new Set<string>();\n\n    // Detecta padrões problemáticos\n    traverse(ast.node, {\n      ImportDeclaration(p: NodePath<t.ImportDeclaration>) {\n        const somenteTipo = ehImportSomenteTipo(p.node);\n        if (!somenteTipo) tiposImport.add('import');\n        const val = p.node.source.value;\n\n        // Import type-only não participa do grafo nem de validações runtime\n        if (somenteTipo) {\n          // Ainda rastreia nomes para evitar ruído em heurísticas posteriores\n          const specifiers = p.node.specifiers || [];\n          for (const s of specifiers) {\n            if (\n              s.type === 'ImportDefaultSpecifier' ||\n              s.type === 'ImportSpecifier'\n            ) {\n              importsDeclarados.add(s.local.name);\n            } else if (s.type === 'ImportNamespaceSpecifier') {\n              importsDeclarados.add(s.local.name);\n            }\n          }\n          return;\n        }\n\n        const resolved = resolverModulo(val, relPath, arquivosExistentes);\n\n        // Alimenta grafo\n        if (!depsSet) {\n          depsSet = new Set<string>();\n          grafoDependencias.set(relPath, depsSet);\n        }\n        depsSet.add(resolved.key);\n        // Import externo\n        if (!val.startsWith('.') && !val.startsWith('/')) {\n          ocorrencias.push({\n            tipo: 'info',\n            mensagem:\n              DetectorDependenciasMessages.importDependenciaExterna(val),\n            relPath,\n            linha: p.node.loc?.start.line,\n            coluna: p.node.loc?.start.column,\n          });\n        }\n        // Import relativo longo\n        if (val.startsWith('.') && val.split('../').length > 3) {\n          ocorrencias.push({\n            tipo: 'aviso',\n            mensagem: DetectorDependenciasMessages.importRelativoLongo(val),\n            relPath,\n            linha: p.node.loc?.start.line,\n            coluna: p.node.loc?.start.column,\n          });\n        }\n        // Import de .js em projeto TS\n        if (\n          relPath.endsWith('.ts') &&\n          val.endsWith('.js') &&\n          !resolved.key.endsWith('.ts')\n        ) {\n          ocorrencias.push({\n            tipo: 'aviso',\n            mensagem: DetectorDependenciasMessages.importJsEmTs(val),\n            relPath,\n            linha: p.node.loc?.start.line,\n            coluna: p.node.loc?.start.column,\n          });\n        }\n        // Import de arquivo inexistente (só para caminhos relativos)\n        if (val.startsWith('.')) {\n          if (arquivosExistentes && !resolved.existe) {\n            ocorrencias.push({\n              tipo: 'erro',\n              mensagem:\n                DetectorDependenciasMessages.importArquivoInexistente(val),\n              relPath,\n              linha: p.node.loc?.start.line,\n              coluna: p.node.loc?.start.column,\n            });\n          }\n        }\n        // Rastrear import names para heurística de uso dinâmico\n        const specifiers = p.node.specifiers || [];\n        for (const s of specifiers) {\n          if (\n            s.type === 'ImportDefaultSpecifier' ||\n            s.type === 'ImportSpecifier'\n          ) {\n            importsDeclarados.add(s.local.name);\n          } else if (s.type === 'ImportNamespaceSpecifier') {\n            importsDeclarados.add(s.local.name);\n          }\n        }\n      },\n      CallExpression(p: NodePath<t.CallExpression>) {\n        const { callee, arguments: args } = p.node;\n        if (\n          callee.type === 'Identifier' &&\n          callee.name === 'require' &&\n          args[0]?.type === 'StringLiteral'\n        ) {\n          tiposImport.add('require');\n          const val = args[0].value;\n          const resolved = resolverModulo(val, relPath, arquivosExistentes);\n          // Alimenta grafo\n          if (!depsSet) {\n            depsSet = new Set<string>();\n            grafoDependencias.set(relPath, depsSet);\n          }\n          depsSet.add(resolved.key);\n          // Require externo\n          if (!val.startsWith('.') && !val.startsWith('/')) {\n            ocorrencias.push({\n              tipo: 'info',\n              mensagem:\n                DetectorDependenciasMessages.requireDependenciaExterna(val),\n              relPath,\n              linha: p.node.loc?.start.line,\n              coluna: p.node.loc?.start.column,\n            });\n          }\n          // Require relativo longo\n          if (val.startsWith('.') && val.split('../').length > 3) {\n            ocorrencias.push({\n              tipo: 'aviso',\n              mensagem: DetectorDependenciasMessages.requireRelativoLongo(val),\n              relPath,\n              linha: p.node.loc?.start.line,\n              coluna: p.node.loc?.start.column,\n            });\n          }\n          // Require de .js em projeto TS\n          if (\n            relPath.endsWith('.ts') &&\n            val.endsWith('.js') &&\n            !resolved.key.endsWith('.ts')\n          ) {\n            ocorrencias.push({\n              tipo: 'aviso',\n              mensagem: DetectorDependenciasMessages.requireJsEmTs(val),\n              relPath,\n              linha: p.node.loc?.start.line,\n              coluna: p.node.loc?.start.column,\n            });\n          }\n          // Require de arquivo inexistente (só para caminhos relativos)\n          if (val.startsWith('.')) {\n            if (arquivosExistentes && !resolved.existe) {\n              ocorrencias.push({\n                tipo: 'erro',\n                mensagem:\n                  DetectorDependenciasMessages.requireArquivoInexistente(val),\n                relPath,\n                linha: p.node.loc?.start.line,\n                coluna: p.node.loc?.start.column,\n              });\n            }\n          }\n        }\n      },\n    });\n\n    // Heurística: marcar imports como usados quando aparecem em registros dinâmicos comuns\n    if (importsDeclarados.size > 0) {\n      // Inicializa registro para este arquivo\n      let usadosDinamicos = importsUsadosDinamicamente.get(relPath);\n\n      for (const nome of Array.from(importsDeclarados)) {\n        const usado = isUsadoEmRegistroDinamico(src, nome);\n        if (usado) {\n          // Registra no mapa global para consulta por outros detectores\n          if (!usadosDinamicos) {\n            usadosDinamicos = new Set<string>();\n            importsUsadosDinamicamente.set(relPath, usadosDinamicos);\n          }\n          usadosDinamicos.add(nome);\n\n          // Emite info apenas em modo verbose (não polui relatórios normais)\n          if (config.VERBOSE) {\n            ocorrencias.push({\n              tipo: 'info',\n              mensagem:\n                DetectorDependenciasMessages.importUsadoRegistroDinamico(nome),\n              relPath,\n            });\n          }\n        }\n      }\n    }\n\n    // Mistura de require/import\n    if (tiposImport.size > 1) {\n      ocorrencias.push({\n        tipo: 'aviso',\n        mensagem: DetectorDependenciasMessages.usoMistoRequireImport,\n        relPath,\n      });\n    }\n\n    // Detecta import circular simples (arquivo importa a si mesmo)\n    if (grafoDependencias.get(relPath)?.has(relPath)) {\n      ocorrencias.push({\n        tipo: 'alerta',\n        mensagem: DetectorDependenciasMessages.importCircularSelf,\n        relPath,\n      });\n    }\n\n    // Detecta ciclos mais complexos (A -> B -> C -> A)\n    const maxDepth =\n      typeof (config as unknown as Record<string, unknown>)\n        .DEPENDENCIAS_MAX_PROFUNDIDADE === 'number'\n        ? (config as unknown as { DEPENDENCIAS_MAX_PROFUNDIDADE: number })\n            .DEPENDENCIAS_MAX_PROFUNDIDADE\n        : 5;\n    const ciclo = detectarCicloComplexo(relPath, grafoDependencias, maxDepth);\n    if (ciclo.length > 1) {\n      const verifyCycles = Boolean(\n        (config as unknown as Record<string, unknown>)['SPECIAL_VERIFY_CYCLES'],\n      );\n      if (\n        verifyCycles &&\n        !verificarCicloConfirmado(ciclo, grafoDependencias, arquivosExistentes)\n      ) {\n        return Array.isArray(ocorrencias) ? ocorrencias : [];\n      }\n\n      // Apenas reporta se ciclo tem mais de 1 nó (evita falsos positivos)\n      // Remove caminhos base para deixar mais legível\n      const caminhoLimpo = ciclo.map((p) => {\n        const relativo = path.relative(process.cwd(), p) || p;\n        return relativo.replace(/\\\\/g, '/');\n      });\n      const caminhoCompleto = caminhoLimpo.join(' → ');\n\n      ocorrencias.push({\n        tipo: 'alerta',\n        mensagem: DetectorDependenciasMessages.dependenciaCircular(\n          ciclo.length,\n          caminhoCompleto,\n        ),\n        relPath,\n        // Adiciona contexto extra para debugging\n        contexto: `Ciclo completo: ${caminhoCompleto}`,\n      });\n    }\n\n    return Array.isArray(ocorrencias) ? ocorrencias : [];\n  },\n};\n"]}