{"version":3,"file":"detector-contexto-inteligente.js","sourceRoot":"","sources":["../../../src/analistas/detectores/detector-contexto-inteligente.ts"],"names":[],"mappings":"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","sourcesContent":["// SPDX-License-Identifier: MIT\n/**\n * Sistema Inteligente de Detec√ß√£o de Arqu√©tipos por Contexto\n *\n * Combina m√∫ltiplas evid√™ncias para inferir corretamente o tipo de projeto:\n * - An√°lise de depend√™ncias (package.json)\n * - Padr√µes de c√≥digo (imports, exports, funcionalidades)\n * - Estrutura de arquivos e nomenclatura\n * - Configura√ß√µes espec√≠ficas de tecnologia\n * - Contexto de execu√ß√£o e entry points\n */\n\nimport type { NodePath } from '@babel/traverse';\nimport type {\n  ExportDeclaration,\n  ImportDeclaration,\n  Program,\n} from '@babel/types';\nimport { config } from '@core/config/config.js';\nimport { traverse } from '@core/config/traverse.js';\n\nimport type {\n  EvidenciaContexto,\n  FileEntryWithAst,\n  PackageJson,\n  ResultadoDeteccaoContextual,\n} from '@';\n\n// Re-exporta os tipos para compatibilidade\nexport type { EvidenciaContexto, ResultadoDeteccaoContextual };\n\n/**\n * Padr√µes espec√≠ficos de detec√ß√£o por tecnologia\n */\nconst PADROES_TECNOLOGIA = {\n  'discord-bot': {\n    dependencias: ['discord.js', '@discordjs/builders', '@discordjs/rest'],\n    imports: ['discord.js', 'discord-api-types'],\n    exports: [],\n    estrutura: ['commands', 'events', 'handlers'],\n    configs: ['bot.js', 'bot.ts', 'config/bot'],\n    scripts: ['start:bot', 'dev:bot'],\n    codigoPatterns: [\n      /Client\\(\\s*\\{[\\s\\S]*intents/i,\n      /\\.login\\s*\\(\\s*process\\.env/i,\n      /interaction\\.reply/i,\n      /message\\.reply/i,\n    ],\n    // Sinais que indicam que N√ÉO √© um bot Discord (√© uma CLI)\n    antiPatterns: [\n      /new\\s+Command\\(/i, // Commander.js\n      /program\\.parse/i, // CLI parsing\n      /\\.option\\s*\\(/i, // CLI options\n      /bin\\/index\\.(js|ts)/i, // Binary entry point\n    ],\n  },\n  'telegram-bot': {\n    dependencias: ['telegraf', 'grammy', 'node-telegram-bot-api'],\n    imports: ['telegraf', 'grammy'],\n    exports: [],\n    estrutura: ['scenes', 'handlers', 'middleware'],\n    configs: ['bot.js', 'bot.ts'],\n    scripts: ['start:bot'],\n    codigoPatterns: [\n      /new\\s+Telegraf/i,\n      /bot\\.command/i,\n      /ctx\\.reply/i,\n      /\\.telegram\\.sendMessage/i,\n    ],\n    // Sinais que indicam que N√ÉO √© um bot Telegram\n    antiPatterns: [\n      /new\\s+Command\\(/i,\n      /program\\.parse/i,\n      /\\.option\\s*\\(/i,\n      /bin\\/index\\.(js|ts)/i,\n    ],\n  },\n  'express-api': {\n    dependencias: [\n      'express',\n      'cors',\n      'helmet',\n      'joi',\n      'swagger',\n      'express-validator',\n      'multer',\n      'compression',\n    ],\n    imports: ['express', 'cors', 'helmet', 'body-parser', 'cookie-parser'],\n    exports: ['app', 'server', 'router'],\n    estrutura: [\n      'routes',\n      'controllers',\n      'middleware',\n      'models',\n      'services',\n      'utils',\n      'config',\n    ],\n    configs: ['server.js', 'app.js', 'index.js', 'src/server.js', 'src/app.js'],\n    scripts: ['start', 'dev', 'serve', 'test'],\n    codigoPatterns: [\n      /express\\(\\)/i,\n      /app\\.use\\(/i,\n      /app\\.(get|post|put|delete|patch)\\(/i,\n      /res\\.(json|send|status|sendStatus)/i,\n      /req\\.(body|params|query|headers)/i,\n      /router\\.(get|post|put|delete)/i,\n      /middleware/i,\n      /cors\\(/i,\n      /helmet\\(/i,\n    ],\n    antiPatterns: [],\n  },\n  'fastify-api': {\n    dependencias: [\n      'fastify',\n      '@fastify/cors',\n      '@fastify/helmet',\n      '@fastify/jwt',\n      '@fastify/rate-limit',\n      '@fastify/swagger',\n    ],\n    imports: ['fastify', '@fastify/cors', '@fastify/helmet'],\n    exports: ['app', 'server', 'fastify'],\n    estrutura: [\n      'routes',\n      'plugins',\n      'handlers',\n      'schemas',\n      'services',\n      'utils',\n    ],\n    configs: ['server.js', 'app.js', 'index.js', 'src/server.js', 'src/app.js'],\n    scripts: ['start', 'dev', 'serve', 'test'],\n    codigoPatterns: [\n      /fastify\\(\\)/i,\n      /\\.register\\(/i,\n      /reply\\.(send|code)/i,\n      /\\.listen\\(\\s*\\d+/i,\n      /fastify\\.(get|post|put|delete|patch)/i,\n      /request\\.(body|params|query|headers)/i,\n      /addHook/i,\n      /setValidatorCompiler/i,\n      /setSerializerCompiler/i,\n    ],\n    antiPatterns: [],\n  },\n  'cli-modular': {\n    dependencias: ['commander', 'yargs', 'inquirer', 'chalk', 'ora', 'prompts'],\n    imports: ['commander', 'yargs', 'inquirer'],\n    exports: [],\n    estrutura: ['cli', 'cli/commands', 'bin', 'commands'],\n    configs: ['cli.js', 'cli.ts', 'bin/', 'bin/index.js', 'bin/index.ts'],\n    scripts: ['build', 'start', 'dev'],\n    codigoPatterns: [\n      /new\\s+Command\\(/i,\n      /\\.command\\s*\\(/i,\n      /\\.option\\s*\\(/i,\n      /process\\.argv/i,\n      /\\.parse\\s*\\(/i,\n      /\\.action\\s*\\(/i,\n      /\\.version\\s*\\(/i,\n      /\\.description\\s*\\(/i,\n    ],\n    // Sinais que indicam que N√ÉO √© um bot\n    antiPatterns: [\n      /Client\\(\\s*\\{[\\s\\S]*intents/i, // Discord client\n      /new\\s+Telegraf/i, // Telegram bot\n      /bot\\.command/i, // Bot commands\n      /interaction\\.reply/i, // Discord interactions\n      /ctx\\.reply/i, // Telegram context\n    ],\n  },\n  'electron-app': {\n    dependencias: ['electron', 'electron-builder', 'electron-updater'],\n    imports: ['electron'],\n    exports: [],\n    estrutura: ['src/main', 'src/renderer', 'src/preload'],\n    configs: ['main.js', 'main.ts', 'electron.js'],\n    scripts: ['electron', 'build:electron', 'pack'],\n    codigoPatterns: [\n      /new\\s+BrowserWindow/i,\n      /app\\.whenReady/i,\n      /ipcMain\\.handle/i,\n      /contextBridge\\.exposeInMainWorld/i,\n    ],\n    antiPatterns: [],\n  },\n  'next-fullstack': {\n    dependencias: [\n      'next',\n      'react',\n      'react-dom',\n      '@types/react',\n      '@types/node',\n      'typescript',\n    ],\n    imports: ['next', 'react', 'next/router', 'next/link', 'next/head'],\n    exports: [],\n    estrutura: [\n      'pages',\n      'app',\n      'api',\n      'components',\n      'lib',\n      'utils',\n      'styles',\n      'public',\n      'prisma',\n    ],\n    configs: [\n      'next.config.js',\n      'next.config.ts',\n      'next.config.mjs',\n      'next-env.d.ts',\n      'tailwind.config.js',\n    ],\n    scripts: ['dev', 'build', 'start', 'lint', 'type-check'],\n    codigoPatterns: [\n      /export\\s+default\\s+function.*Page/i,\n      /getServerSideProps/i,\n      /getStaticProps/i,\n      /getStaticPaths/i,\n      /NextApiRequest/i,\n      /NextApiResponse/i,\n      /useRouter/i,\n      /next\\/head/i,\n      /next\\/link/i,\n      /export\\s+default\\s+function\\s+Page/i, // App Router\n      /export\\s+default\\s+function\\s+Layout/i, // App Router Layout\n      /export\\s+default\\s+function\\s+Loading/i, // App Router Loading\n      /export\\s+default\\s+function\\s+Error/i, // App Router Error\n      /export\\s+default\\s+function\\s+NotFound/i, // App Router Not Found\n      /metadata\\s*=/i, // App Router metadata\n      /generateStaticParams/i, // App Router static generation\n      /generateMetadata/i, // App Router metadata generation\n    ],\n    antiPatterns: [],\n  },\n  'react-spa': {\n    dependencias: ['react', 'react-dom', 'react-router', 'vite'],\n    imports: ['react', 'react-dom'],\n    exports: [],\n    estrutura: ['src/components', 'src/pages', 'src/hooks'],\n    configs: ['vite.config.js', 'webpack.config.js'],\n    scripts: ['dev', 'build', 'preview'],\n    codigoPatterns: [\n      /ReactDOM\\.render/i,\n      /createRoot/i,\n      /useState/i,\n      /useEffect/i,\n    ],\n    antiPatterns: [],\n  },\n  'nest-api': {\n    dependencias: [\n      '@nestjs/core',\n      '@nestjs/common',\n      '@nestjs/platform-express',\n    ],\n    imports: ['@nestjs/core', '@nestjs/common'],\n    exports: [],\n    estrutura: ['src/modules', 'src/controllers', 'src/services'],\n    configs: ['main.ts', 'app.module.ts'],\n    scripts: ['start', 'start:dev', 'build'],\n    codigoPatterns: [\n      /@Controller\\(/i,\n      /@Injectable\\(/i,\n      /@Module\\(/i,\n      /NestFactory\\.create/i,\n    ],\n    antiPatterns: [],\n  },\n  'koa-api': {\n    dependencias: [\n      'koa',\n      'koa-router',\n      'koa-cors',\n      'koa-helmet',\n      'koa-bodyparser',\n    ],\n    imports: ['koa', 'koa-router', 'koa-cors', 'koa-helmet'],\n    exports: ['app', 'server'],\n    estrutura: ['routes', 'controllers', 'middleware', 'models', 'services'],\n    configs: ['server.js', 'app.js', 'index.js'],\n    scripts: ['start', 'dev', 'serve'],\n    codigoPatterns: [\n      /new\\s+Koa\\(\\)/i,\n      /app\\.use\\(/i,\n      /router\\.(get|post|put|delete)/i,\n      /ctx\\.(body|status|set)/i,\n      /next\\(\\)/i,\n      /middleware/i,\n    ],\n    antiPatterns: [],\n  },\n  'hapi-api': {\n    dependencias: ['@hapi/hapi', 'joi', 'boom'],\n    imports: ['@hapi/hapi', 'joi', 'boom'],\n    exports: ['server', 'routes'],\n    estrutura: ['routes', 'controllers', 'plugins', 'models'],\n    configs: ['server.js', 'index.js'],\n    scripts: ['start', 'dev', 'serve'],\n    codigoPatterns: [\n      /Hapi\\.server/i,\n      /server\\.route/i,\n      /handler:\\s*async/i,\n      /request\\.(payload|params|query)/i,\n      /h\\.response/i,\n      /Joi\\.object/i,\n    ],\n    antiPatterns: [],\n  },\n  'serverless-api': {\n    dependencias: [\n      'serverless',\n      'serverless-offline',\n      '@types/aws-lambda',\n      'aws-sdk',\n    ],\n    imports: ['aws-lambda', 'aws-sdk'],\n    exports: ['handler'],\n    estrutura: ['src/handlers', 'src/functions', 'src/lib'],\n    configs: ['serverless.yml', 'serverless.ts'],\n    scripts: ['deploy', 'offline', 'invoke'],\n    codigoPatterns: [\n      /exports\\.handler/i,\n      /APIGatewayProxyEvent/i,\n      /APIGatewayProxyResult/i,\n      /Context/i,\n      /Callback/i,\n      /async\\s+\\(event/i,\n    ],\n    antiPatterns: [],\n  },\n  'vue-spa': {\n    dependencias: ['vue', '@vue/cli-service', 'vue-router', 'vuex', 'pinia'],\n    imports: ['vue', 'vue-router', 'vuex', 'pinia'],\n    exports: [],\n    estrutura: [\n      'src/components',\n      'src/views',\n      'src/router',\n      'src/store',\n      'src/composables',\n      'public',\n    ],\n    configs: ['vue.config.js', 'vue.config.ts'],\n    scripts: ['serve', 'build', 'lint'],\n    codigoPatterns: [\n      /createApp\\(/i,\n      /<template>/i,\n      /<script>/i,\n      /<style/i,\n      /defineComponent/i,\n      /setup\\(\\)/i,\n      /ref\\(/i,\n      /reactive\\(/i,\n      /computed\\(/i,\n      /watch\\(/i,\n      /onMounted/i,\n      /onUnmounted/i,\n    ],\n    antiPatterns: [],\n  },\n  'nuxt-app': {\n    dependencias: ['nuxt', 'nuxt3', '@nuxt/devtools', '@nuxtjs/tailwindcss'],\n    imports: ['nuxt', '@nuxt/kit'],\n    exports: [],\n    estrutura: [\n      'pages',\n      'components',\n      'layouts',\n      'plugins',\n      'middleware',\n      'composables',\n      'server/api',\n    ],\n    configs: ['nuxt.config.js', 'nuxt.config.ts'],\n    scripts: ['dev', 'build', 'generate', 'preview'],\n    codigoPatterns: [\n      /defineNuxtConfig/i,\n      /useHead/i,\n      /useState/i,\n      /useFetch/i,\n      /useAsyncData/i,\n      /navigateTo/i,\n      /<NuxtPage/i,\n      /<NuxtLink/i,\n      /definePageMeta/i,\n      /server\\/api/i,\n    ],\n    antiPatterns: [],\n  },\n  'vite-vue': {\n    dependencias: ['vue', 'vite', '@vitejs/plugin-vue', 'vue-router', 'pinia'],\n    imports: ['vue', 'vite', '@vitejs/plugin-vue'],\n    exports: [],\n    estrutura: [\n      'src/components',\n      'src/views',\n      'src/router',\n      'src/stores',\n      'src/composables',\n      'src/assets',\n    ],\n    configs: ['vite.config.js', 'vite.config.ts', 'index.html'],\n    scripts: ['dev', 'build', 'preview'],\n    codigoPatterns: [\n      /createApp\\(/i,\n      /<template>/i,\n      /<script setup/i,\n      /<style scoped/i,\n      /defineComponent/i,\n      /setup\\(\\)/i,\n      /ref\\(/i,\n      /reactive\\(/i,\n      /computed\\(/i,\n    ],\n    antiPatterns: [],\n  },\n};\n\nfunction analisarDependencias(packageJson?: PackageJson): EvidenciaContexto[] {\n  const evidencias: EvidenciaContexto[] = [];\n\n  if (!packageJson) return evidencias;\n\n  const deps = {\n    ...((packageJson.dependencies as Record<string, string>) || {}),\n    ...((packageJson.devDependencies as Record<string, string>) || {}),\n  };\n\n  if (config.VERBOSE) {\n    console.log('üîç Analisando depend√™ncias:', Object.keys(deps));\n  }\n\n  for (const [tecnologia, padroes] of Object.entries(PADROES_TECNOLOGIA)) {\n    for (const dep of padroes.dependencias) {\n      if (deps[dep]) {\n        evidencias.push({\n          tipo: 'dependencia',\n          valor: dep,\n          confianca: 0.8,\n          tecnologia,\n          localizacao: 'package.json',\n        });\n      }\n    }\n  }\n\n  return evidencias;\n}\n\nfunction analisarScripts(packageJson?: PackageJson): EvidenciaContexto[] {\n  const evidencias: EvidenciaContexto[] = [];\n\n  if (!packageJson) return evidencias;\n\n  const scripts = (packageJson.scripts as Record<string, string>) || {};\n\n  for (const [tecnologia, padroes] of Object.entries(PADROES_TECNOLOGIA)) {\n    for (const script of padroes.scripts) {\n      if (\n        Object.keys(scripts).some(\n          (key) => key.includes(script) || scripts[key]?.includes(script),\n        )\n      ) {\n        evidencias.push({\n          tipo: 'script',\n          valor: script,\n          confianca: 0.6,\n          tecnologia,\n          localizacao: 'package.json',\n        });\n      }\n    }\n  }\n\n  return evidencias;\n}\n\nfunction analisarEstrutura(estruturaDetectada: string[]): EvidenciaContexto[] {\n  const evidencias: EvidenciaContexto[] = [];\n\n  for (const [tecnologia, padroes] of Object.entries(PADROES_TECNOLOGIA)) {\n    for (const estrutura of padroes.estrutura) {\n      // Verifica√ß√£o mais rigorosa para evitar falsos positivos\n      const matchExato = estruturaDetectada.find((dir) => {\n        // Match exato do caminho\n        if (dir === estrutura) return true;\n\n        // Match no final do caminho (ex: src/cli/commands matcheia 'commands')\n        if (dir.endsWith(`/${estrutura}`)) return true;\n\n        // Match no in√≠cio seguido de / (ex: commands/subdir matcheia 'commands')\n        if (dir.startsWith(`${estrutura}/`)) return true;\n\n        // Para padr√µes que incluem /, verificar match rigoroso de subcaminho\n        if (estrutura.includes('/')) {\n          // Normalizar separadores para compara√ß√£o\n          const estruturaNorm = estrutura.replace(/\\\\/g, '/');\n          const dirNorm = dir.replace(/\\\\/g, '/');\n\n          // Verificar se √© subcaminho exato\n          if (dirNorm === estruturaNorm) return true;\n          if (dirNorm.endsWith(`/${estruturaNorm}`)) return true;\n          if (dirNorm.startsWith(`${estruturaNorm}/`)) return true;\n        }\n\n        return false;\n      });\n\n      if (matchExato) {\n        evidencias.push({\n          tipo: 'estrutura',\n          valor: estrutura,\n          confianca: 0.7,\n          tecnologia,\n          localizacao: matchExato,\n        });\n      }\n    }\n  }\n\n  return evidencias;\n}\n\nfunction analisarImportsExports(\n  arquivos: FileEntryWithAst[],\n): EvidenciaContexto[] {\n  const evidencias: EvidenciaContexto[] = [];\n\n  for (const arquivo of arquivos) {\n    if (\n      !arquivo.ast ||\n      !('node' in arquivo.ast) ||\n      !arquivo.ast.node ||\n      arquivo.ast.node.type !== 'Program'\n    )\n      continue;\n\n    const programa = arquivo.ast.node as Program;\n    const imports: string[] = [];\n    const exports: string[] = [];\n\n    traverse(programa, {\n      ImportDeclaration(path: NodePath<ImportDeclaration>) {\n        const node = path.node;\n        if (typeof node.source.value === 'string') {\n          imports.push(node.source.value);\n        }\n      },\n      ExportDeclaration(path: NodePath<ExportDeclaration>) {\n        const node = path.node as ExportDeclaration;\n        // Analisa exports nomeados e padr√£o\n        if ('declaration' in node && node.declaration) {\n          if (\n            'id' in node.declaration &&\n            node.declaration.id &&\n            'name' in node.declaration.id\n          ) {\n            exports.push(node.declaration.id.name as string);\n          }\n        }\n      },\n    });\n\n    // Verifica evid√™ncias nos imports\n    for (const [tecnologia, padroes] of Object.entries(PADROES_TECNOLOGIA)) {\n      for (const importEsperado of padroes.imports) {\n        if (imports.some((imp) => imp.includes(importEsperado))) {\n          evidencias.push({\n            tipo: 'import',\n            valor: importEsperado,\n            confianca: 0.9,\n            tecnologia,\n            localizacao: arquivo.relPath,\n          });\n        }\n      }\n\n      for (const exportEsperado of padroes.exports) {\n        if (exports.some((exp) => exp.includes(exportEsperado))) {\n          evidencias.push({\n            tipo: 'export',\n            valor: exportEsperado,\n            confianca: 0.8,\n            tecnologia,\n            localizacao: arquivo.relPath,\n          });\n        }\n      }\n    }\n  }\n\n  return evidencias;\n}\n\nfunction analisarPadroesCodigo(\n  arquivos: FileEntryWithAst[],\n): EvidenciaContexto[] {\n  const evidencias: EvidenciaContexto[] = [];\n\n  for (const arquivo of arquivos) {\n    if (!arquivo.content) continue;\n\n    for (const [tecnologia, padroes] of Object.entries(PADROES_TECNOLOGIA)) {\n      for (const pattern of padroes.codigoPatterns) {\n        if (pattern.test(arquivo.content)) {\n          evidencias.push({\n            tipo: 'codigo',\n            valor: pattern.source,\n            confianca: 0.85,\n            tecnologia,\n            localizacao: arquivo.relPath,\n          });\n        }\n      }\n    }\n  }\n\n  return evidencias;\n}\n\n/**\n * Verifica se anti-patterns est√£o presentes no c√≥digo\n * Anti-patterns indicam que a tecnologia detectada est√° INCORRETA\n */\nfunction verificarAntiPatterns(\n  arquivos: FileEntryWithAst[],\n  tecnologia: string,\n): boolean {\n  const padraoTecnologia =\n    PADROES_TECNOLOGIA[tecnologia as keyof typeof PADROES_TECNOLOGIA];\n  if (!padraoTecnologia || !padraoTecnologia.antiPatterns) {\n    return false; // Sem anti-patterns definidos\n  }\n\n  for (const arquivo of arquivos) {\n    if (!arquivo.content) continue;\n\n    // Se encontrar qualquer anti-pattern, retorna true (detec√ß√£o incorreta)\n    for (const antiPattern of padraoTecnologia.antiPatterns) {\n      if (antiPattern.test(arquivo.content)) {\n        return true; // Anti-pattern encontrado!\n      }\n    }\n  }\n\n  return false; // Nenhum anti-pattern encontrado\n}\n\nfunction gerarSugestoesMelhoria(\n  tecnologia: string,\n  evidencias: EvidenciaContexto[],\n): string[] {\n  const sugestoes: string[] = [];\n  const _arquivosEncontrados = evidencias\n    .map((e) => e.localizacao)\n    .filter(Boolean);\n\n  switch (tecnologia) {\n    case 'discord-bot':\n      if (!evidencias.some((e) => e.valor.includes('intents'))) {\n        sugestoes.push(\n          'üîß Configurar intents espec√≠ficos no Discord Client para melhor performance',\n        );\n      }\n      if (!evidencias.some((e) => e.valor.includes('command'))) {\n        sugestoes.push(\n          'üìÅ Estruturar commands em pasta dedicada para organiza√ß√£o',\n        );\n      }\n      if (!evidencias.some((e) => e.valor.includes('rate'))) {\n        sugestoes.push(\n          '‚ö° Implementar rate limiting para evitar banimento por spam',\n        );\n      }\n      break;\n\n    case 'express-api':\n      if (!evidencias.some((e) => e.valor.includes('helmet'))) {\n        sugestoes.push('üõ°Ô∏è Adicionar helmet para headers de seguran√ßa');\n      }\n      if (!evidencias.some((e) => e.valor.includes('cors'))) {\n        sugestoes.push('üåê Configurar CORS adequadamente para APIs');\n      }\n      if (\n        !evidencias.some(\n          (e) => e.valor.includes('joi') && e.valor.includes('swagger'),\n        )\n      ) {\n        sugestoes.push(\n          'üìã Implementar valida√ß√£o com Joi e documenta√ß√£o Swagger',\n        );\n      }\n      break;\n\n    case 'cli-modular':\n      if (!evidencias.some((e) => e.valor.includes('help'))) {\n        sugestoes.push('‚ùì Implementar comando --help abrangente');\n      }\n      if (!evidencias.some((e) => e.valor.includes('version'))) {\n        sugestoes.push('üì¶ Adicionar comando --version');\n      }\n      if (!evidencias.some((e) => e.valor.includes('config'))) {\n        sugestoes.push('‚öôÔ∏è Considerar arquivo de configura√ß√£o para usu√°rios');\n      }\n      break;\n\n    case 'electron-app':\n      if (!evidencias.some((e) => e.valor.includes('preload'))) {\n        sugestoes.push('üîí Implementar preload script para comunica√ß√£o segura');\n      }\n      if (!evidencias.some((e) => e.valor.includes('contextIsolation'))) {\n        sugestoes.push('üõ°Ô∏è Habilitar context isolation para seguran√ßa');\n      }\n      if (!evidencias.some((e) => e.valor.includes('updater'))) {\n        sugestoes.push(\n          'üîÑ Implementar auto-updater para atualiza√ß√µes autom√°ticas',\n        );\n      }\n      break;\n  }\n\n  return sugestoes;\n}\n\nfunction detectarProblemas(\n  tecnologia: string,\n  evidencias: EvidenciaContexto[],\n  arquivos: FileEntryWithAst[],\n): string[] {\n  const problemas: string[] = [];\n\n  switch (tecnologia) {\n    case 'discord-bot':\n      // Verifica se token est√° hardcoded\n      for (const arquivo of arquivos) {\n        if (\n          arquivo.content?.includes('token') &&\n          !arquivo.content.includes('process.env')\n        ) {\n          problemas.push(`üö® Poss√≠vel token hardcoded em ${arquivo.relPath}`);\n        }\n      }\n      break;\n\n    case 'express-api':\n      // Verifica middleware de seguran√ßa\n      const temHelmet = evidencias.some((e) => e.valor.includes('helmet'));\n      const temCors = evidencias.some((e) => e.valor.includes('cors'));\n      if (!temHelmet) {\n        problemas.push('‚ö†Ô∏è API sem helmet - vulner√°vel a ataques de header');\n      }\n      if (!temCors) {\n        problemas.push(\n          '‚ö†Ô∏è API sem CORS configurado - poss√≠veis problemas de origem',\n        );\n      }\n      break;\n\n    case 'electron-app':\n      // Verifica configura√ß√µes de seguran√ßa\n      for (const arquivo of arquivos) {\n        if (arquivo.content?.includes('nodeIntegration: true')) {\n          problemas.push(\n            `üö® nodeIntegration habilitado em ${arquivo.relPath} - risco de seguran√ßa`,\n          );\n        }\n        if (arquivo.content?.includes('contextIsolation: false')) {\n          problemas.push(\n            `üö® contextIsolation desabilitado em ${arquivo.relPath} - vulnerabilidade`,\n          );\n        }\n      }\n      break;\n  }\n\n  return problemas;\n}\n\nfunction calcularConfiancaTotal(evidencias: EvidenciaContexto[]): number {\n  if (evidencias.length === 0) return 0;\n\n  const pesosPorTipo = {\n    dependencia: 1.0,\n    import: 0.9,\n    codigo: 0.85,\n    export: 0.8,\n    estrutura: 0.7,\n    script: 0.6,\n    config: 0.5,\n  };\n\n  let somaConfianca = 0;\n  let somaPesos = 0;\n\n  for (const evidencia of evidencias) {\n    const peso =\n      pesosPorTipo[evidencia.tipo as keyof typeof pesosPorTipo] || 0.5;\n    somaConfianca += evidencia.confianca * peso;\n    somaPesos += peso;\n  }\n\n  return somaPesos > 0 ? somaConfianca / somaPesos : 0;\n}\n\nexport function detectarContextoInteligente(\n  estruturaDetectada: string[],\n  arquivos: FileEntryWithAst[],\n  packageJson?: PackageJson,\n  options?: { quiet?: boolean },\n): ResultadoDeteccaoContextual[] {\n  // DEBUG: Log simples para verificar se est√° sendo chamado\n  if (!options?.quiet && config.VERBOSE) {\n    console.log(\n      'üîç Package.json completo:',\n      JSON.stringify(packageJson, null, 2),\n    );\n    if (packageJson?.dependencies?.vue) {\n      console.log('üîç Package.json tem Vue:', packageJson.dependencies.vue);\n    }\n  }\n  const todasEvidencias: EvidenciaContexto[] = [\n    ...analisarDependencias(packageJson),\n    ...analisarScripts(packageJson),\n    ...analisarEstrutura(estruturaDetectada),\n    ...analisarImportsExports(arquivos),\n    ...analisarPadroesCodigo(arquivos),\n  ];\n\n  // Agrupa evid√™ncias por tecnologia\n  const evidenciasPorTecnologia = new Map<string, EvidenciaContexto[]>();\n\n  for (const evidencia of todasEvidencias) {\n    const tec = evidencia.tecnologia || 'desconhecido';\n    if (!evidenciasPorTecnologia.has(tec)) {\n      evidenciasPorTecnologia.set(tec, []);\n    }\n    const tecEvidencias = evidenciasPorTecnologia.get(tec);\n    if (tecEvidencias) {\n      tecEvidencias.push(evidencia);\n    }\n  }\n\n  // Calcula resultados por tecnologia\n  const resultados: ResultadoDeteccaoContextual[] = [];\n\n  for (const [tecnologia, evidencias] of evidenciasPorTecnologia) {\n    let confiancaTotal = calcularConfiancaTotal(evidencias);\n\n    // Verifica√ß√£o de depend√™ncias obrigat√≥rias para evitar falsos positivos\n    const padraoTecnologia =\n      PADROES_TECNOLOGIA[tecnologia as keyof typeof PADROES_TECNOLOGIA];\n    if (padraoTecnologia && padraoTecnologia.dependencias.length > 0) {\n      const temDependenciaObrigatoria = evidencias.some(\n        (e) =>\n          e.tipo === 'dependencia' &&\n          padraoTecnologia.dependencias.includes(e.valor),\n      );\n\n      // Se n√£o tem nenhuma depend√™ncia obrigat√≥ria, penalizar severamente\n      if (!temDependenciaObrigatoria) {\n        confiancaTotal *= 0.1; // Reduz confian√ßa para 10%\n      }\n    }\n\n    // üö® VERIFICA√á√ÉO DE ANTI-PATTERNS: Se anti-patterns est√£o presentes, ELIMINAR detec√ß√£o\n    const temAntiPattern = verificarAntiPatterns(arquivos, tecnologia);\n    if (temAntiPattern) {\n      // Anti-pattern detectado = detec√ß√£o FALSA, eliminar confian√ßa\n      confiancaTotal = 0;\n      // Opcional: Adicionar evid√™ncia negativa\n      evidencias.push({\n        tipo: 'codigo',\n        valor: 'anti-pattern-detectado',\n        confianca: -1.0, // Negativa\n        tecnologia,\n        localizacao: 'c√≥digo',\n      });\n    }\n\n    if (confiancaTotal > 0.3) {\n      // Threshold m√≠nimo para considerar\n      resultados.push({\n        tecnologia,\n        confiancaTotal,\n        evidencias,\n        sugestoesMelhoria: gerarSugestoesMelhoria(tecnologia, evidencias),\n        problemasDetectados: detectarProblemas(\n          tecnologia,\n          evidencias,\n          arquivos,\n        ),\n      });\n    }\n  }\n\n  // Ordena por confian√ßa decrescente\n  return resultados.sort((a, b) => b.confiancaTotal - a.confiancaTotal);\n}\n\nexport function inferirArquetipoInteligente(\n  estruturaDetectada: string[],\n  arquivos: FileEntryWithAst[],\n  packageJson?: PackageJson,\n  options?: { quiet?: boolean },\n): string {\n  const resultados = detectarContextoInteligente(\n    estruturaDetectada,\n    arquivos,\n    packageJson,\n    options,\n  );\n\n  if (resultados.length === 0) return 'generico';\n\n  const melhorResultado = resultados[0];\n\n  // Mapeia tecnologias para arqu√©tipos oficiais\n  const mapeamentoArquetipos: Record<string, string> = {\n    'discord-bot': 'bot',\n    'telegram-bot': 'bot',\n    'express-api': 'api-rest-express',\n    'fastify-api': 'api-rest-express',\n    'nest-api': 'api-rest-express',\n    'koa-api': 'api-rest-express',\n    'hapi-api': 'api-rest-express',\n    'serverless-api': 'api-rest-express',\n    'cli-modular': 'cli-modular',\n    'electron-app': 'electron',\n    'next-fullstack': 'fullstack',\n    'react-spa': 'landing-page',\n    'vue-spa': 'vue-spa',\n    'nuxt-app': 'vue-spa',\n    'vite-vue': 'vue-spa',\n  };\n\n  return (\n    mapeamentoArquetipos[melhorResultado.tecnologia || 'generico'] || 'generico'\n  );\n}\n"]}