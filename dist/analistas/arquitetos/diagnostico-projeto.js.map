{"version":3,"file":"diagnostico-projeto.js","sourceRoot":"","sources":["../../../src/analistas/arquitetos/diagnostico-projeto.ts"],"names":[],"mappings":"AAGA,MAAM,UAAU,mBAAmB,CAAC,MAAqB;IACvD,MAAM,SAAS,GAAG,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC;SACrC,MAAM,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,EAAE,EAAE,CAAC,KAAK,KAAK,IAAI,CAAC;SACrC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE,EAAE,CAAC,KAA4B,CAAC,CAAC;IAElD,IAAI,IAAI,GAA+B,cAAc,CAAC;IACtD,IAAI,SAAS,GAAG,GAAG,CAAC;IAEpB,IAAI,aAAa,IAAI,MAAM,IAAI,MAAM,CAAC,WAAW,EAAE,CAAC;QAClD,IAAI,GAAG,WAAW,CAAC;QACnB,SAAS,GAAG,IAAI,CAAC;IACnB,CAAC;SAAM,IAAI,YAAY,IAAI,MAAM,IAAI,MAAM,CAAC,UAAU,EAAE,CAAC;QACvD,IAAI,GAAG,UAAU,CAAC;QAClB,SAAS,GAAG,IAAI,CAAC;IACnB,CAAC;SAAM,IAAI,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC;QAC7B,IAAI,GAAG,SAAS,CAAC;QACjB,SAAS,GAAG,IAAI,CAAC;IACnB,CAAC;SAAM,IAAI,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC;QACzB,IAAI,GAAG,KAAK,CAAC;QACb,SAAS,GAAG,IAAI,CAAC;IACnB,CAAC;SAAM,IAAI,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC;QACzB,IAAI,GAAG,KAAK,CAAC;QACb,SAAS,GAAG,IAAI,CAAC;IACnB,CAAC;SAAM,IAAI,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC;QACzB,IAAI,GAAG,KAAK,CAAC;QACb,SAAS,GAAG,GAAG,CAAC;IAClB,CAAC;IAGD,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,cAAc,EAAE,SAAS,EAAE,CAAC;AAChE,CAAC;AAED,SAAS,SAAS,CAAC,CAAgB;IAEjC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,KAAK,IAAI,CAAC,CAAC;AACjC,CAAC;AAED,SAAS,KAAK,CAAC,CAAgB;IAC7B,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,IAAI,CAAC,CAAC,cAAc,IAAI,CAAC,CAAC,UAAU,CAAC,CAAC;AAC1D,CAAC;AAED,SAAS,KAAK,CAAC,CAAgB;IAC7B,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,aAAa,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,IAAI,KAAK,CAAC,CAAC,CAAC;AAClE,CAAC;AAED,SAAS,KAAK,CAAC,CAAgB;IAC7B,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;AACpB,CAAC","sourcesContent":["// SPDX-License-Identifier: MIT\nimport type { DiagnosticoProjeto, SinaisProjeto } from '@';\n\nexport function diagnosticarProjeto(sinais: SinaisProjeto): DiagnosticoProjeto {\n  const positivos = Object.entries(sinais)\n    .filter(([, valor]) => valor === true)\n    .map(([chave]) => chave as keyof SinaisProjeto);\n\n  let tipo: DiagnosticoProjeto['tipo'] = 'desconhecido';\n  let confianca = 0.3;\n\n  if ('ehFullstack' in sinais && sinais.ehFullstack) {\n    tipo = 'fullstack';\n    confianca = 0.95;\n  } else if ('ehMonorepo' in sinais && sinais.ehMonorepo) {\n    tipo = 'monorepo';\n    confianca = 0.99;\n  } else if (ehLanding(sinais)) {\n    tipo = 'landing';\n    confianca = 0.92;\n  } else if (ehApi(sinais)) {\n    tipo = 'api';\n    confianca = 0.88;\n  } else if (ehCli(sinais)) {\n    tipo = 'cli';\n    confianca = 0.85;\n  } else if (ehLib(sinais)) {\n    tipo = 'lib';\n    confianca = 0.8;\n  }\n\n  // Mantém valor de confiança original (0..1) sem arredondar para evitar perda de precisão\n  return { tipo, sinais: positivos, confiabilidade: confianca };\n}\n\nfunction ehLanding(s: SinaisProjeto): boolean {\n  // Considera landing se temPages for true, mesmo sem components/controllers\n  return !!(s.temPages === true);\n}\n\nfunction ehApi(s: SinaisProjeto): boolean {\n  return !!(s.temApi ?? s.temControllers ?? s.temExpress);\n}\n\nfunction ehLib(s: SinaisProjeto): boolean {\n  return !!(s.temSrc && !s.temComponents && !(s.temApi ?? false));\n}\n\nfunction ehCli(s: SinaisProjeto): boolean {\n  return !!s.temCli;\n}\n"]}