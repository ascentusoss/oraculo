{"version":3,"file":"analista-css.js","sourceRoot":"","sources":["../../../src/analistas/plugins/analista-css.ts"],"names":[],"mappings":"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","sourcesContent":["// SPDX-License-Identifier: MIT\nimport {\n  AnalystOrigins,\n  AnalystTypes,\n  CssMessages,\n  SeverityLevels,\n} from '/messages/core/plugin-messages.js';\nimport {\n  isLikelyIntentionalDuplicate,\n  lintCssLikeStylelint,\n} from '/impar/stylelint.js';\nimport postcss, {\n  type AtRule,\n  type Container,\n  type Declaration,\n  type Root,\n  type Rule,\n  type Syntax,\n} from 'postcss';\nimport postcssSass from 'postcss-sass';\nimport postcssScss from 'postcss-scss';\n\nimport { criarAnalista, criarOcorrencia } from '@';\n\nconst disableEnv =\n  (globalThis as { process?: { env?: Record<string, string | undefined> } })\n    .process?.env?.ORACULO_DISABLE_PLUGIN_CSS === '1';\n\ntype Msg = ReturnType<typeof criarOcorrencia>;\n\nfunction warn(\n  message: string,\n  relPath: string,\n  line?: number,\n  nivelArg: (typeof SeverityLevels)[keyof typeof SeverityLevels] = SeverityLevels.warning,\n): Msg {\n  return criarOcorrencia({\n    relPath,\n    mensagem: message,\n    linha: line,\n    nivel: nivelArg,\n    origem: AnalystOrigins.css,\n    tipo: AnalystTypes.css,\n  });\n}\n\nfunction collectCssIssues(src: string, relPath: string): Msg[] {\n  const ocorrencias: Msg[] = [];\n  const lines = src.split(/\\n/);\n\n  // Stack de blocos para não misturar propriedades de seletores/frames diferentes\n  const stack: Array<{\n    props: Record<string, { line: number; value: string }>;\n    context?: 'font-face';\n  }> = [];\n\n  lines.forEach((lineText, idx) => {\n    const line = idx + 1;\n    const trimmed = lineText.trim();\n\n    // Abre novos blocos antes de analisar propriedades da linha\n    const opens = (trimmed.match(/\\{/g) || []).length;\n    for (let i = 0; i < opens; i++) {\n      const ctx = //i.test(trimmed) ? 'font-face' : undefined;\n      stack.push({ props: {}, context: ctx });\n    }\n\n    const current = stack[stack.length - 1];\n    if (current) {\n      const propMatch = /^([a-zA-Z-]+)\\s*:\\s*([^;]+)?/.exec(trimmed);\n      if (propMatch) {\n        const prop = propMatch[1].toLowerCase();\n        const value = (propMatch[2] || '').trim();\n        const prev = current.props[prop];\n        if (prev) {\n          const ctx = current.context\n            ? { currentAtRule: current.context }\n            : undefined;\n          if (isLikelyIntentionalDuplicate(prop, prev.value, value, ctx)) {\n            // Duplicata legítima (fallback vendor, viewport, cor, etc)\n          } else if (prev.value === value) {\n            // Mesma propriedade, mesmo valor = erro claro\n            ocorrencias.push(\n              warn(CssMessages.duplicatePropertySame(prop), relPath, line),\n            );\n          } else {\n            // Valores diferentes sem padrão claro = possível erro\n            ocorrencias.push(\n              warn(\n                CssMessages.duplicatePropertyDifferent(prop, prev.value, value),\n                relPath,\n                line,\n              ),\n            );\n          }\n        } else {\n          current.props[prop] = { line, value };\n        }\n      }\n    }\n\n    // !important\n    if (/!important/.test(trimmed)) {\n      ocorrencias.push(warn(CssMessages.importantUsage, relPath, line));\n    }\n\n    // /http\n    if (/^\\s+[^;]*http:\\/\\//i.test(trimmed)) {\n      ocorrencias.push(warn(CssMessages.httpImport, relPath, line));\n    }\n\n    // url(http:)\n    if (/url\\(\\s*['\"]?http:\\/\\//i.test(trimmed)) {\n      ocorrencias.push(warn(CssMessages.httpUrl, relPath, line));\n    }\n\n    // Fecha blocos depois de processar a linha\n    const closes = (trimmed.match(/\\}/g) || []).length;\n    for (let i = 0; i < closes; i++) {\n      if (stack.length) stack.pop();\n    }\n  });\n\n  return ocorrencias;\n}\n\nfunction collectCssIssuesLikeStylelint(\n  src: string,\n  relPath: string,\n): Msg[] | null {\n  const warnings = lintCssLikeStylelint({ code: src, relPath });\n  if (!warnings.length) return null;\n\n  return warnings.map((w) => {\n    const nivel =\n      w.severity === 'error' ? SeverityLevels.error : SeverityLevels.warning;\n    return warn(w.text, relPath, w.line, nivel);\n  });\n}\n\ntype CssRuleDecl = { prop: string; value: string };\n\nfunction normalizeCssValue(value: string): string {\n  return value.replace(/\\s+/g, ' ').trim();\n}\n\nfunction canonicalizeDecls(decls: CssRuleDecl[]): {\n  signature: string;\n  count: number;\n} {\n  const map = new Map<string, string>();\n  decls.forEach((d) => {\n    const prop = d.prop.trim().toLowerCase();\n    const value = normalizeCssValue(d.value);\n    if (!prop || !value) return;\n    // Mantém a última ocorrência; duplicatas já são tratadas em outra regra.\n    map.set(prop, value);\n  });\n  const sorted = [...map.entries()].sort((a, b) => a[0].localeCompare(b[0]));\n  return {\n    signature: sorted.map(([p, v]) => `${p}:${v}`).join(';'),\n    count: sorted.length,\n  };\n}\n\nfunction splitSimpleSelectors(selectorText: string): string[] {\n  return selectorText\n    .split(',')\n    .map((s) => s.trim())\n    .filter(Boolean)\n    .filter((s) => /^(\\.[A-Za-z0-9_-]+|#[A-Za-z0-9_-]+)$/.test(s));\n}\n\nfunction parseWithPostCssRoots(src: string, relPath: string): Root[] | null {\n  const isScss = /\\.scss$/i.test(relPath);\n  const isSass = /\\.sass$/i.test(relPath);\n  const syntax: Syntax | undefined = isScss\n    ? postcssScss\n    : isSass\n      ? postcssSass\n      : undefined;\n\n  try {\n    // Importante: `postcss.parse(..., { syntax })` ignora `syntax`.\n    // Para aplicar parser SCSS/SASS corretamente, usamos `postcss().process`.\n    const result = postcss().process(src, {\n      from: relPath,\n      ...(syntax ? { syntax } : {}),\n    });\n\n    const rootUnknown: unknown = result.root;\n    const rootAny = rootUnknown as\n      | { type?: unknown; nodes?: unknown[] }\n      | undefined;\n\n    // Alguns parsers podem retornar `Document` (com múltiplos roots internos)\n    if (\n      rootAny &&\n      rootAny.type === 'document' &&\n      Array.isArray(rootAny.nodes)\n    ) {\n      const roots = rootAny.nodes.filter((n): n is Root => {\n        const t = (n as { type?: unknown } | undefined)?.type;\n        return t === 'root';\n      });\n      return roots.length ? roots : null;\n    }\n\n    // Caso padrão: um único Root\n    return [result.root as unknown as Root];\n  } catch {\n    return null;\n  }\n}\n\nfunction getNodeLine(\n  node: { source?: { start?: { line?: number } } } | undefined,\n): number | undefined {\n  const line = node?.source?.start?.line;\n  return typeof line === 'number' && Number.isFinite(line) ? line : undefined;\n}\n\nfunction formatAtRuleContext(n: AtRule): string {\n  const name = String(n.name || '').toLowerCase();\n  const params = String(n.params || '').trim();\n  return `@${name}${params ? ` ${params}` : ''}`;\n}\n\nfunction normalizePropKey(prop: string): string {\n  // Propriedades CSS são case-insensitive; custom properties são case-sensitive.\n  return prop.startsWith('--') ? prop : prop.toLowerCase();\n}\n\n// Lista conhecida de propriedades CSS válidas (subset comum)\n// Em produção, considere usar uma biblioteca como css-tree ou mdn-data\nconst KNOWN_CSS_PROPERTIES = new Set([\n  // Layout\n  'display',\n  'position',\n  'top',\n  'right',\n  'bottom',\n  'left',\n  'width',\n  'height',\n  'margin',\n  'margin-top',\n  'margin-right',\n  'margin-bottom',\n  'margin-left',\n  'padding',\n  'padding-top',\n  'padding-right',\n  'padding-bottom',\n  'padding-left',\n  'border',\n  'border-top',\n  'border-right',\n  'border-bottom',\n  'border-left',\n  'border-width',\n  'border-style',\n  'border-color',\n  'box-sizing',\n  'float',\n  'clear',\n  'overflow',\n  'overflow-x',\n  'overflow-y',\n  'z-index',\n  'visibility',\n\n  // Flexbox\n  'flex',\n  'flex-direction',\n  'flex-wrap',\n  'flex-flow',\n  'justify-content',\n  'align-items',\n  'align-content',\n  'align-self',\n  'flex-grow',\n  'flex-shrink',\n  'flex-basis',\n  'order',\n\n  // Grid\n  'grid',\n  'grid-template-columns',\n  'grid-template-rows',\n  'grid-template-areas',\n  'grid-column',\n  'grid-row',\n  'grid-area',\n  'gap',\n  'row-gap',\n  'column-gap',\n\n  // Tipografia\n  'font',\n  'font-family',\n  'font-size',\n  'font-weight',\n  'font-style',\n  'font-variant',\n  'line-height',\n  'letter-spacing',\n  'word-spacing',\n  'text-align',\n  'text-decoration',\n  'text-transform',\n  'text-indent',\n  'white-space',\n  'word-break',\n  'word-wrap',\n  'color',\n  'background',\n  'background-color',\n  'background-image',\n  'background-repeat',\n  'background-position',\n  'background-size',\n\n  // Outros comuns\n  'cursor',\n  'opacity',\n  'transform',\n  'transition',\n  'animation',\n  'list-style',\n  'vertical-align',\n  'text-overflow',\n  'box-shadow',\n  'border-radius',\n  'outline',\n  'content',\n  'counter-reset',\n  'counter-increment',\n]);\n\nfunction isValidCssProperty(prop: string): boolean {\n  const normalized = prop.toLowerCase();\n  // Permite propriedades custom (--*) e vendor (-webkit-*, -moz-*, etc.)\n  if (normalized.startsWith('--') || normalized.startsWith('-')) {\n    return true;\n  }\n  return KNOWN_CSS_PROPERTIES.has(normalized);\n}\n\nfunction detectCssHacks(value: string): string | null {\n  // Detecta hacks comuns de CSS\n  const hacks = [\n    { pattern: /\\\\9/, name: 'backslash-9 hack' },\n    { pattern: /_property/, name: 'underscore hack' },\n    { pattern: /\\*property/, name: 'star hack' },\n    { pattern: /property\\\\\\0\\//, name: 'null byte hack' },\n    { pattern: /expression\\(/, name: 'IE expression' },\n  ];\n\n  for (const hack of hacks) {\n    if (hack.pattern.test(value)) {\n      return hack.name;\n    }\n  }\n  return null;\n}\n\nfunction collectCssIssuesFromPostCssAst(root: Root, relPath: string): Msg[] {\n  const ocorrencias: Msg[] = [];\n  const seen = new Set<string>();\n  const pushOnce = (m: Msg) => {\n    const k = `${m.mensagem}|${m.relPath}|${m.linha ?? 0}`;\n    if (seen.has(k)) return;\n    seen.add(k);\n    ocorrencias.push(m);\n  };\n\n  type Hit = { selector: string; line?: number };\n  const byContextAndSignature = new Map<\n    string,\n    { declCount: number; hits: Hit[] }\n  >();\n\n  const visit = (\n    container: Container,\n    ctxAtRules: string[],\n    ctxSelectors: string[],\n  ) => {\n    // 1) Duplicidade / !important / url(http:)\n    const props: Record<string, { value: string; line?: number }> = {};\n    const inFontFace = ctxAtRules.some((c) =>\n      c.toLowerCase().startsWith(''),\n    );\n\n    container.nodes?.forEach((node) => {\n      if (node.type === 'decl') {\n        const decl = node as Declaration;\n        const propRaw = String(decl.prop || '').trim();\n\n        // SCSS variável: \"$color: ...\" (não é propriedade CSS)\n        if (!propRaw || propRaw.startsWith('$')) {\n          return;\n        }\n\n        const propKey = normalizePropKey(propRaw);\n        const value = normalizeCssValue(\n          `${String(decl.value || '')}${decl.important ? ' !important' : ''}`,\n        );\n        const line = getNodeLine(decl);\n\n        const prev = props[propKey];\n        if (prev) {\n          const ctx = inFontFace\n            ? { currentAtRule: 'font-face' as const }\n            : undefined;\n          if (isLikelyIntentionalDuplicate(propKey, prev.value, value, ctx)) {\n            // duplicata intencional\n          } else if (prev.value === value) {\n            pushOnce(\n              warn(CssMessages.duplicatePropertySame(propRaw), relPath, line),\n            );\n          } else {\n            pushOnce(\n              warn(\n                CssMessages.duplicatePropertyDifferent(\n                  propRaw,\n                  prev.value,\n                  value,\n                ),\n                relPath,\n                line,\n              ),\n            );\n          }\n        }\n        props[propKey] = { value, line };\n\n        // Validação de propriedade inválida\n        if (!isValidCssProperty(propRaw)) {\n          pushOnce(warn(CssMessages.invalidProperty(propRaw), relPath, line));\n        }\n\n        // Detecta hacks CSS\n        const hack = detectCssHacks(String(decl.value || ''));\n        if (hack) {\n          pushOnce(warn(CssMessages.cssHackDetected(hack), relPath, line));\n        }\n\n        if (decl.important) {\n          pushOnce(warn(CssMessages.importantUsage, relPath, line));\n        }\n\n        if (/url\\(\\s*['\"]?http:\\/\\//i.test(String(decl.value || ''))) {\n          pushOnce(warn(CssMessages.httpUrl, relPath, line));\n        }\n      }\n    });\n\n    // 2) Unificação/centralização (apenas em regras com seletores simples)\n    if (container.type === 'rule') {\n      const rule = container as Rule;\n      const selectorText = String(rule.selector || '');\n      const simpleSelectors = splitSimpleSelectors(selectorText);\n      if (simpleSelectors.length) {\n        const decls: CssRuleDecl[] = [];\n        rule.nodes?.forEach((n) => {\n          if (n.type !== 'decl') return;\n          const d = n as Declaration;\n          const prop = String(d.prop || '').trim();\n          if (!prop || prop.startsWith('$')) return;\n          const value = `${String(d.value || '')}${d.important ? ' !important' : ''}`;\n          decls.push({ prop, value });\n        });\n\n        // Detecta regras vazias\n        if (decls.length === 0) {\n          pushOnce(warn(CssMessages.emptyRule, relPath, getNodeLine(rule)));\n        }\n\n        const { signature, count } = canonicalizeDecls(decls);\n        if (signature && count >= 3) {\n          const ctxKey = [...ctxAtRules, ...ctxSelectors].join('|');\n          const key = `${ctxKey}||${signature}`;\n          const entry = byContextAndSignature.get(key) ?? {\n            declCount: count,\n            hits: [],\n          };\n          const line = getNodeLine(rule);\n          simpleSelectors.forEach((sel) =>\n            entry.hits.push({ selector: sel, line }),\n          );\n          byContextAndSignature.set(key, entry);\n        }\n      } else if (selectorText.trim()) {\n        // Verifica seletor malformado (se não conseguiu dividir em seletores simples)\n        try {\n          // Tenta parsear o seletor com uma regex simples\n          const invalidChars = /[{}[\\]()]/;\n          if (invalidChars.test(selectorText)) {\n            pushOnce(\n              warn(\n                CssMessages.malformedSelector(selectorText.trim()),\n                relPath,\n                getNodeLine(rule),\n              ),\n            );\n          }\n        } catch {\n          pushOnce(\n            warn(\n              CssMessages.malformedSelector(selectorText.trim()),\n              relPath,\n              getNodeLine(rule),\n            ),\n          );\n        }\n      }\n    }\n\n    // 3) Descer recursivamente para filhos ( e regras aninhadas)\n    container.nodes?.forEach((node) => {\n      if (node.type === 'atrule') {\n        const at = node as AtRule;\n        const name = String(at.name || '').toLowerCase();\n        const line = getNodeLine(at);\n\n        //  http://...\n        if (\n          name === 'import' &&\n          /^\\s*(url\\()?\\s*['\"]?http:\\/\\//i.test(String(at.params || ''))\n        ) {\n          pushOnce(warn(CssMessages.httpImport, relPath, line));\n        }\n\n        // Alguns at-rules tem bloco e nós internos; outros são só linha.\n        if (at.nodes && at.nodes.length) {\n          visit(at, [...ctxAtRules, formatAtRuleContext(at)], ctxSelectors);\n        }\n        return;\n      }\n\n      if (node.type === 'rule') {\n        const r = node as Rule;\n        // Contexto de nesting (SCSS): para regras filhas, adiciona o seletor do container atual\n        // (não o seletor da regra filha), evitando misturar árvores de seletores diferentes.\n        const nextSelectors =\n          container.type === 'rule'\n            ? [\n                ...ctxSelectors,\n                `sel ${String((container as Rule).selector || '').trim()}`,\n              ]\n            : ctxSelectors;\n        visit(r, ctxAtRules, nextSelectors);\n      }\n    });\n  };\n\n  visit(root, [], []);\n\n  for (const { declCount, hits } of byContextAndSignature.values()) {\n    const selectors = [...new Set(hits.map((h) => h.selector))];\n    if (selectors.length < 2) continue;\n    const line = hits\n      .map((h) => h.line)\n      .filter((n): n is number => typeof n === 'number' && Number.isFinite(n))\n      .sort((a, b) => a - b)[0];\n\n    pushOnce(\n      warn(CssMessages.unifySelectors(selectors, declCount), relPath, line),\n    );\n    const ids = selectors.filter((s) => s.startsWith('#'));\n    ids.slice(0, 3).forEach((idSel) => {\n      pushOnce(\n        warn(\n          CssMessages.idSelectorPreferClass(idSel),\n          relPath,\n          line,\n          SeverityLevels.info,\n        ),\n      );\n    });\n  }\n\n  return ocorrencias;\n}\n\nexport const analistaCss = criarAnalista({\n  nome: 'analista-css',\n  categoria: 'estilo',\n  descricao: 'Lint de CSS do Oráculo (com fallback heurístico).',\n  global: false,\n  test: (relPath: string): boolean => /\\.(css|scss|sass)$/i.test(relPath),\n  aplicar: async (src, relPath): Promise<Msg[] | null> => {\n    if (disableEnv) return null;\n    const isCss = /\\.css$/i.test(relPath);\n\n    const roots = parseWithPostCssRoots(src, relPath);\n    const astIssues = roots\n      ? roots.flatMap((r) => collectCssIssuesFromPostCssAst(r, relPath))\n      : [];\n\n    // Mantém regras stylelint-like para CSS puro (pipeline atual do Oráculo).\n    const cssLint = isCss\n      ? (collectCssIssuesLikeStylelint(src, relPath) ?? [])\n      : [];\n\n    const seen = new Set<string>();\n    const merged: Msg[] = [];\n    const pushOnce = (m: Msg) => {\n      const k = `${m.mensagem}|${m.relPath}|${m.linha ?? 0}`;\n      if (seen.has(k)) return;\n      seen.add(k);\n      merged.push(m);\n    };\n    cssLint.forEach(pushOnce);\n    astIssues.forEach(pushOnce);\n\n    if (merged.length) return merged;\n\n    // Fallback: heurístico (útil quando o parser não aceita casos extremos/arquivos quebrados)\n    const fallback = collectCssIssues(src, relPath);\n    return fallback.length ? fallback : null;\n  },\n});\n\nexport default analistaCss;\n"]}