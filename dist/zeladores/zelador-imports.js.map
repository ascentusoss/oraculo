{"version":3,"file":"zelador-imports.js","sourceRoot":"","sources":["../../src/zeladores/zelador-imports.ts"],"names":[],"mappings":"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","sourcesContent":["// SPDX-License-Identifier: MIT\n/**\n * Zelador de Imports\n *\n * Corrige automaticamente imports em arquivos TypeScript/JavaScript:\n * - Converte imports relativos para aliases (, , etc)\n * - Normaliza /<subpath> para /types\n * - Remove extensões .js desnecessárias em imports de tipos\n *\n * Migrado de:\n * - scripts/fix-alias-imports.mjs\n * - scripts/fix-tipos-imports.mjs\n */\n\nimport { promises as fs } from 'node:fs';\nimport path from 'node:path';\n\nimport { log } from '/messages/index.js';\nimport {\n  ERROS_IMPORTS,\n  gerarResumoImports,\n  MENSAGENS_IMPORTS,\n  PROGRESSO_IMPORTS,\n} from '/messages/zeladores/zelador-messages.js';\n\nimport type {\n  AliasConfig,\n  ImportCorrecao,\n  ImportCorrecaoArquivo,\n  ImportCorrecaoOptions,\n} from '@';\n\n/**\n * Configuração padrão de aliases baseada em tsconfig.json\n */\nconst DEFAULT_ALIAS_CONFIG: AliasConfig = {\n  '': './core',\n  '': './analistas',\n  '': './types',\n  '': './shared',\n  '': './cli',\n  '': './guardian',\n  '': './relatorios',\n  '': './zeladores',\n};\n\n/**\n * Padrões de imports que devem ser corrigidos\n */\nconst PATTERNS = {\n  // /types.js → /types\n  tiposComExtensao: /\\/types\\.js\\b/g,\n\n  // Imports relativos que podem ser convertidos em aliases\n  importRelativo: /from\\s+(['\"])(\\.\\.[\\/\\\\].+?)\\1/g,\n};\n\n/**\n * Caminha recursivamente por um diretório coletando arquivos\n */\nasync function* walkDirectory(dir: string): AsyncGenerator<string> {\n  try {\n    const entries = await fs.readdir(dir, { withFileTypes: true });\n\n    for (const entry of entries) {\n      const fullPath = path.join(dir, entry.name);\n\n      if (entry.isDirectory()) {\n        // Pular node_modules, dist, coverage, etc\n        if (['node_modules', 'dist', 'coverage', '.git'].includes(entry.name)) {\n          continue;\n        }\n        yield* walkDirectory(fullPath);\n      } else if (entry.isFile()) {\n        // Apenas arquivos TS/JS/JSX/TSX\n        if (/\\.(ts|tsx|js|jsx|mjs|cjs)$/.test(entry.name)) {\n          yield fullPath;\n        }\n      }\n    }\n  } catch (error) {\n    log.erro(ERROS_IMPORTS.lerDiretorio(dir, error));\n  }\n}\n\n/**\n * Corrige imports de  com extensão .js ou subpaths\n */\nfunction corrigirImportsTipos(conteudo: string): {\n  conteudo: string;\n  correcoes: ImportCorrecao[];\n} {\n  const correcoes: ImportCorrecao[] = [];\n  let conteudoAtualizado = conteudo;\n\n  // Corrigir /types.js → /types\n  conteudoAtualizado = conteudoAtualizado.replace(\n    PATTERNS.tiposComExtensao,\n    (match, offset) => {\n      correcoes.push({\n        tipo: 'tipos-extensao',\n        de: match,\n        para: '/types',\n        linha: conteudo.substring(0, offset).split('\\n').length,\n      });\n      return '/types';\n    },\n  );\n\n  // Corrigir /<subpath> → /types\n  // Importante: não deve \"corrigir\" o que já está em /types (evita duplicar correções).\n  const regex = /(['\"])\\/([^'\"\\n]+?)\\1/g;\n  conteudoAtualizado = conteudoAtualizado.replace(\n    regex,\n    (match, quote: string, subpath: string, offset: number) => {\n      const normalized = String(subpath || '').trim();\n\n      // Já correto: não gera correção nem altera texto.\n      if (normalized === 'types') return match;\n\n      // Caso ainda chegue aqui como types.js (por algum input estranho), não duplicar: trata como extensão.\n      if (normalized === 'types.js') {\n        const novoImport = `${quote}/types${quote}`;\n        correcoes.push({\n          tipo: 'tipos-extensao',\n          de: match,\n          para: novoImport,\n          linha: conteudo.substring(0, offset).split('\\n').length,\n        });\n        return novoImport;\n      }\n\n      const novoImport = `${quote}/types${quote}`;\n      correcoes.push({\n        tipo: 'tipos-subpath',\n        de: match,\n        para: novoImport,\n        linha: conteudo.substring(0, offset).split('\\n').length,\n      });\n      return novoImport;\n    },\n  );\n\n  return { conteudo: conteudoAtualizado, correcoes };\n}\n\n/**\n * Detecta e corrige imports relativos que podem ser convertidos em aliases\n */\nfunction corrigirImportsRelativos(\n  conteudo: string,\n  _filePath: string,\n  _projectRoot: string,\n  _aliasConfig: AliasConfig,\n): { conteudo: string; correcoes: ImportCorrecao[] } {\n  const correcoes: ImportCorrecao[] = [];\n  const conteudoAtualizado = conteudo;\n\n  // Implementação simplificada - não tenta converter relativos para aliases\n  // pois requer análise de paths complexa. Foco apenas em  por enquanto.\n\n  return { conteudo: conteudoAtualizado, correcoes };\n}\n\n/**\n * Processa um único arquivo corrigindo todos os imports\n */\nasync function processarArquivo(\n  filePath: string,\n  options: ImportCorrecaoOptions,\n): Promise<ImportCorrecaoArquivo> {\n  const resultado: ImportCorrecaoArquivo = {\n    arquivo: path.relative(options.projectRoot, filePath),\n    correcoes: [],\n    modificado: false,\n  };\n\n  try {\n    const conteudoOriginal = await fs.readFile(filePath, 'utf-8');\n    let conteudoAtualizado = conteudoOriginal;\n\n    // Aplicar correções de \n    if (options.corrigirTipos !== false) {\n      const { conteudo, correcoes } = corrigirImportsTipos(conteudoAtualizado);\n      conteudoAtualizado = conteudo;\n      resultado.correcoes.push(...correcoes);\n    }\n\n    // Aplicar correções de imports relativos\n    if (options.corrigirRelativos !== false) {\n      const { conteudo, correcoes } = corrigirImportsRelativos(\n        conteudoAtualizado,\n        filePath,\n        options.projectRoot,\n        options.aliasConfig || DEFAULT_ALIAS_CONFIG,\n      );\n      conteudoAtualizado = conteudo;\n      resultado.correcoes.push(...correcoes);\n    }\n\n    // Escrever arquivo se houver mudanças\n    if (conteudoAtualizado !== conteudoOriginal) {\n      if (!options.dryRun) {\n        await fs.writeFile(filePath, conteudoAtualizado, 'utf-8');\n      }\n      resultado.modificado = true;\n    }\n  } catch (error) {\n    resultado.erro = error instanceof Error ? error.message : String(error);\n  }\n\n  return resultado;\n}\n\n/**\n * Executa o zelador de imports em um diretório\n */\nexport async function executarZeladorImports(\n  targetDirs: string[],\n  options: Partial<ImportCorrecaoOptions> = {},\n): Promise<ImportCorrecaoArquivo[]> {\n  const projectRoot = options.projectRoot || process.cwd();\n  const fullOptions: ImportCorrecaoOptions = {\n    projectRoot,\n    dryRun: options.dryRun ?? false,\n    verbose: options.verbose ?? false,\n    corrigirTipos: options.corrigirTipos ?? true,\n    corrigirRelativos: options.corrigirRelativos ?? false, // Desabilitado por padrão\n    aliasConfig: options.aliasConfig || DEFAULT_ALIAS_CONFIG,\n  };\n\n  const resultados: ImportCorrecaoArquivo[] = [];\n\n  for (const dir of targetDirs) {\n    const fullPath = path.resolve(projectRoot, dir);\n\n    try {\n      await fs.access(fullPath);\n    } catch {\n      if (fullOptions.verbose) {\n        log.aviso(PROGRESSO_IMPORTS.diretorioNaoEncontrado(dir));\n      }\n      continue;\n    }\n\n    for await (const filePath of walkDirectory(fullPath)) {\n      const resultado = await processarArquivo(filePath, fullOptions);\n\n      if (resultado.modificado || resultado.erro) {\n        resultados.push(resultado);\n\n        if (fullOptions.verbose) {\n          if (resultado.modificado) {\n            log.sucesso(\n              PROGRESSO_IMPORTS.arquivoProcessado(\n                resultado.arquivo,\n                resultado.correcoes.length,\n              ),\n            );\n          }\n          if (resultado.erro) {\n            log.erro(\n              PROGRESSO_IMPORTS.arquivoErro(resultado.arquivo, resultado.erro),\n            );\n          }\n        }\n      }\n    }\n  }\n\n  return resultados;\n}\n\n/**\n * Gera relatório de correções aplicadas\n */\nexport function gerarRelatorioCorrecoes(\n  resultados: ImportCorrecaoArquivo[],\n): string {\n  const modificados = resultados.filter((r) => r.modificado);\n  const comErro = resultados.filter((r) => r.erro);\n  const totalCorrecoes = modificados.reduce(\n    (sum, r) => sum + r.correcoes.length,\n    0,\n  );\n\n  const linhas: string[] = [\n    '# Relatório de Correções de Imports\\n',\n    `Arquivos processados: ${resultados.length}`,\n    `Arquivos modificados: ${modificados.length}`,\n    `Total de correções: ${totalCorrecoes}`,\n    `Erros: ${comErro.length}\\n`,\n  ];\n\n  if (modificados.length > 0) {\n    linhas.push('## Arquivos Modificados\\n');\n\n    for (const resultado of modificados) {\n      linhas.push(`### ${resultado.arquivo}`);\n      linhas.push(`**Correções:** ${resultado.correcoes.length}\\n`);\n\n      const porTipo = resultado.correcoes.reduce(\n        (acc: Record<string, number>, c: ImportCorrecao) => {\n          acc[c.tipo] = (acc[c.tipo] || 0) + 1;\n          return acc;\n        },\n        {} as Record<string, number>,\n      );\n\n      for (const [tipo, count] of Object.entries(porTipo)) {\n        linhas.push(`- ${tipo}: ${count}`);\n      }\n      linhas.push('');\n    }\n  }\n\n  if (comErro.length > 0) {\n    linhas.push('## Erros\\n');\n    for (const resultado of comErro) {\n      linhas.push(`- **${resultado.arquivo}**: ${resultado.erro}`);\n    }\n    linhas.push('');\n  }\n\n  return linhas.join('\\n');\n}\n\n/**\n * Função principal para uso via CLI ou programático\n */\nexport async function corrigirImports(\n  dirs: string[] = ['src', 'tests'],\n  options: Partial<ImportCorrecaoOptions> = {},\n): Promise<void> {\n  log.fase?.(MENSAGENS_IMPORTS.titulo);\n  console.log(); // linha vazia para espaçamento\n\n  const resultados = await executarZeladorImports(dirs, {\n    ...options,\n    verbose: true,\n  });\n\n  const modificados = resultados.filter((r) => r.modificado);\n  const totalCorrecoes = modificados.reduce(\n    (sum, r) => sum + r.correcoes.length,\n    0,\n  );\n  const comErro = resultados.filter((r) => r.erro);\n\n  const resumo = gerarResumoImports({\n    processados: resultados.length,\n    modificados: modificados.length,\n    totalCorrecoes,\n    erros: comErro.length,\n    dryRun: options.dryRun ?? false,\n  });\n\n  for (const linha of resumo) {\n    if (linha === '') {\n      console.log();\n    } else if (linha.includes('✅')) {\n      log.sucesso(linha);\n    } else if (linha.includes('⚠️')) {\n      log.aviso(linha);\n    } else {\n      log.info(linha);\n    }\n  }\n}\n"]}